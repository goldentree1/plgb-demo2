const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ArcTooltip-D3NkrSmx.js","./index-DUxFddIG.js","./index-NjQ7mo-o.css"])))=>i.map(i=>d[i]);
import{aI as w,u as v,o as y,j as d,a as _,s as F,_ as T}from"./index-DUxFddIG.js";function O(t,e){var o,i,r,s;const a=e?w(e):void 0,u=t.get("start");let l=t.get("end");const f=t.get("strand"),c=t.get("mate"),m=t.get("refName");let p,x=0,k=0,h=0,b=0;if(["<TRA","<DEL","<INV","<INS","<DUP","<CNV"].some(n=>e==null?void 0:e.startsWith(n))){const n=t.get("INFO"),g=(i=(o=n==null?void 0:n.END)===null||o===void 0?void 0:o[0])!==null&&i!==void 0?i:l;p=(s=(r=n==null?void 0:n.CHR2)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:m,x=g,k=g-1,l=u+1}else if(a!=null&&a.MatePosition){const n=a.MatePosition.split(":");b=a.MateDirection==="left"?1:-1,h=a.Join==="left"?-1:1,x=+n[1],k=+n[1]-1,p=n[0]}return{k1:{refName:m,start:u,end:l,strand:f,mateDirection:b},k2:c??{refName:p||"unknown",end:x,start:k,mateDirection:h}}}function V(t,e){var o;const{k1:i,k2:r}=O(t,e);return[t.get("name"),t.get("id"),v.assembleLocString(i),v.assembleLocString(r),(o=t.get("INFO"))===null||o===void 0?void 0:o.SVTYPE,e].filter(s=>!!s).join("<br/>")}const I=_.lazy(()=>T(()=>import("./ArcTooltip-D3NkrSmx.js"),__vite__mapDeps([0,1,2]),import.meta.url)),E=y(function({model:t,feature:e,alt:o,assembly:i,view:r}){var s,a;const[u,l]=_.useState(!1),{height:f}=t,{k1:c,k2:m}=O(e,o),p=_.useRef(null),x=F.getConf(t,"color",{feature:e,alt:o}),k=i.getCanonicalRefName(c.refName)||c.refName,h=i.getCanonicalRefName(m.refName)||m.refName,b=c.start,S=m.start,n=(s=r.bpToPx({refName:k,coord:b}))===null||s===void 0?void 0:s.offsetPx,g=(a=r.bpToPx({refName:h,coord:S}))===null||a===void 0?void 0:a.offsetPx;if(n!==void 0&&g!==void 0){const A=(g-n)/2,D=Math.abs(A),C=Math.min(f,D),R=n-r.offsetPx,$=g-r.offsetPx,N=R,P=$,M=u?"black":x,j=3;return D>1?d.jsxs(d.Fragment,{children:[d.jsx("path",{d:`M ${N} 0 C ${N} ${C}, ${P} ${C}, ${P} 0`,ref:p,...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{l(!1)},onMouseOver:()=>{l(!0)},onClick:()=>{t.selectFeature(e)},fill:"none",pointerEvents:"stroke"}),c.mateDirection?d.jsx("line",{...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{l(!1)},onMouseOver:()=>{l(!0)},onClick:()=>{t.selectFeature(e)},x1:N,x2:N+c.mateDirection*20,y1:1.5,y2:1.5}):null,m.mateDirection?d.jsx("line",{...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{l(!1)},onMouseOver:()=>{l(!0)},onClick:()=>{t.selectFeature(e)},x1:P,x2:P+m.mateDirection*20,y1:1.5,y2:1.5}):null,u?d.jsx(_.Suspense,{fallback:null,children:d.jsx(I,{contents:V(e,o)})}):null]}):null}return null}),W=y(function({model:t,exportSVG:e,children:o}){const{height:i}=t,r=v.getContainingView(t),s=Math.round(r.dynamicBlocks.totalWidthPx);return e?o:d.jsx("svg",{width:s,height:i,children:o})}),B=y(function({model:t,exportSVG:e}){const o=v.getContainingView(t),i=v.getSession(t),{assemblyManager:r}=i,{features:s}=t,a=r.get(o.assemblyNames[0]);return a?d.jsx(W,{model:t,exportSVG:e,children:s==null?void 0:s.map(u=>{var l;const f=u.get("ALT");return(l=f==null?void 0:f.map(c=>d.jsx(E,{session:i,feature:u,alt:c,view:o,model:t,assembly:a},`${u.id()}-${c}`)))!==null&&l!==void 0?l:d.jsx(E,{session:i,feature:u,view:o,model:t,assembly:a},u.id())})}):null});export{B as A};
//# sourceMappingURL=Arcs-CXMqkB5w.js.map
