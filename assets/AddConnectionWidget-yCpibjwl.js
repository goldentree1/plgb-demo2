import{a_ as j,o as g,a$ as v,j as n,r,c as S,K as E,u as m,b as C,m as b}from"./rpcWorker-X0469dqW.js";import{M as k}from"./MenuItem-CxTol2m1.js";import{S as N,a as M,b as W,c as y}from"./Stepper-DfoNuHbv.js";import"./dividerClasses-BkmUKgu8.js";import"./Collapse-xysby-Ya.js";function B(e){return j(e)&&"connectionInstances"in e}const I=g(function({connectionType:e,model:s,session:o}){const i=e.configEditorComponent||v;return n.jsx(r.Suspense,{fallback:n.jsx(S.LoadingEllipses,{}),children:n.jsx(i,{model:{target:s},session:o})})}),L=g(function({connectionTypeChoices:s,connectionType:o,setConnectionType:i}){const u=s[0];return r.useEffect(()=>{o||i(u)},[o,u,i]),n.jsx("form",{autoComplete:"off",children:o?n.jsx(E,{value:o.name,label:"connectionType",helperText:o.description?n.jsxs(n.Fragment,{children:[o.description,o.url?n.jsx(S.ExternalLink,{href:o.url}):null]}):null,select:!0,fullWidth:!0,onChange:t=>{i(s.find(p=>p.name===t.target.value))},variant:"outlined",children:s.map(t=>n.jsx(k,{value:t.name,children:t.displayName||t.name},t.name))}):null})}),T=b()(e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}})),f=["Select a Connection Type","Configure Connection"],z=g(function({model:e}){const[s,o]=r.useState(),[i,u]=r.useState(),[t,p]=r.useState(0),{classes:c}=T(),a=m.getSession(e),{pluginManager:h}=m.getEnv(a),l=r.useMemo(()=>s==null?void 0:s.configSchema.create({connectionId:i},m.getEnv(e)),[i,s,e]);return n.jsx("div",{className:c.root,children:n.jsx(N,{className:c.stepper,activeStep:t,orientation:"vertical",children:f.map(x=>n.jsxs(M,{children:[n.jsx(W,{children:x}),n.jsxs(y,{children:[t===0?n.jsx(L,{connectionTypeChoices:h.getConnectionElements(),connectionType:s,setConnectionType:d=>{o(d),d&&u(`${d.name}-${Date.now()}`)}}):s&&l?n.jsx(I,{connectionType:s,model:l,session:a}):null,n.jsxs("div",{className:c.actionsContainer,children:[n.jsx(C,{disabled:t===0,onClick:()=>{p(t-1)},className:c.button,children:"Back"}),n.jsx(C,{disabled:!(t===0&&s||t===1&&l),variant:"contained",color:"primary",onClick:()=>{if(t===f.length-1){if(l&&B(a)){const d=a.addConnectionConf(l);a.makeConnection(d)}else a.notify("No config model to add");m.isSessionModelWithWidgets(a)&&a.hideWidget(e)}else p(t+1)},className:c.button,"data-testid":"addConnectionNext",children:t===f.length-1?"Connect":"Next"})]})]})]},x))})})});export{z as default};
//# sourceMappingURL=AddConnectionWidget-yCpibjwl.js.map
