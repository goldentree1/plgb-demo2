{"version":3,"file":"Highlight-AF-VGdkz.js","sources":["../../node_modules/@mui/icons-material/esm/Bookmark.js","../../node_modules/@mui/icons-material/esm/Link.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/Highlight.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2\"\n}), 'Bookmark');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5\"\n}), 'Link');","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useRef, useState } from 'react';\nimport { Menu } from '@jbrowse/core/ui';\nimport { getSession } from '@jbrowse/core/util';\nimport { colord } from '@jbrowse/core/util/colord';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport CloseIcon from '@mui/icons-material/Close';\nimport LinkIcon from '@mui/icons-material/Link';\nimport { IconButton, Tooltip } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    highlight: {\n        height: '100%',\n        position: 'absolute',\n        overflow: 'hidden',\n        background: colord(theme.palette.highlight.main).alpha(0.35).toRgbString(),\n    },\n    linkIcon: {\n        color: colord(theme.palette.highlight.main).darken(0.2).toRgbString(),\n    },\n    z3: {\n        zIndex: 3,\n    },\n}));\nconst Highlight = observer(function ({ model, highlight, }) {\n    var _a;\n    const { classes } = useStyles();\n    const [open, setOpen] = useState(false);\n    const anchorEl = useRef(null);\n    const session = getSession(model);\n    const { assemblyManager } = session;\n    const dismissHighlight = () => {\n        model.removeHighlight(highlight);\n    };\n    function handleClose() {\n        setOpen(false);\n    }\n    const mapCoords = (r) => {\n        const s = model.bpToPx({\n            refName: r.refName,\n            coord: r.start,\n        });\n        const e = model.bpToPx({\n            refName: r.refName,\n            coord: r.end,\n        });\n        return s && e\n            ? {\n                width: Math.max(Math.abs(e.offsetPx - s.offsetPx), 3),\n                left: Math.min(s.offsetPx, e.offsetPx) - model.offsetPx,\n            }\n            : undefined;\n    };\n    const asm = assemblyManager.get(highlight.assemblyName);\n    const h = mapCoords({\n        ...highlight,\n        refName: (_a = asm === null || asm === void 0 ? void 0 : asm.getCanonicalRefName(highlight.refName)) !== null && _a !== void 0 ? _a : highlight.refName,\n    });\n    return h ? (_jsxs(\"div\", { className: classes.highlight, style: {\n            left: h.left,\n            width: h.width,\n        }, children: [_jsx(Tooltip, { title: \"Highlighted from URL parameter\", arrow: true, children: _jsx(IconButton, { ref: anchorEl, className: classes.z3, onClick: () => {\n                        setOpen(true);\n                    }, children: _jsx(LinkIcon, { fontSize: \"small\", className: classes.linkIcon }) }) }), _jsx(Menu, { anchorEl: anchorEl.current, onMenuItemClick: (_event, callback) => {\n                    callback(session);\n                    handleClose();\n                }, open: open, onClose: handleClose, menuItems: [\n                    {\n                        label: 'Dismiss highlight',\n                        icon: CloseIcon,\n                        onClick: () => {\n                            dismissHighlight();\n                        },\n                    },\n                    {\n                        label: 'Bookmark highlighted region',\n                        icon: BookmarkIcon,\n                        onClick: () => {\n                            let bookmarkWidget = session.widgets.get('GridBookmark');\n                            if (!bookmarkWidget) {\n                                bookmarkWidget = session.addWidget('GridBookmarkWidget', 'GridBookmark');\n                            }\n                            bookmarkWidget.addBookmark(highlight);\n                            dismissHighlight();\n                        },\n                    },\n                ] })] })) : null;\n});\nexport default Highlight;\n"],"names":["BookmarkIcon","createSvgIcon","_jsx","LinkIcon","useStyles","makeStyles","theme","colord","Highlight","observer","model","highlight","_a","classes","open","setOpen","useState","anchorEl","useRef","session","getSession","assemblyManager","dismissHighlight","handleClose","mapCoords","r","s","e","asm","h","_jsxs","Tooltip","IconButton","Menu","_event","callback","CloseIcon","bookmarkWidget"],"mappings":"kHAIA,MAAAA,EAAeC,EAA2BC,EAAAA,IAAK,OAAQ,CACrD,EAAG,4DACL,CAAC,CAAa,ECFdC,EAAeF,EAA2BC,EAAAA,IAAK,OAAQ,CACrD,EAAG,iNACL,CAAC,CAAS,ECKJE,EAAYC,EAAU,EAAGC,IAAU,CACrC,UAAW,CACP,OAAQ,OACR,SAAU,WACV,SAAU,SACV,WAAYC,EAAAA,OAAOD,EAAM,QAAQ,UAAU,IAAI,EAAE,MAAM,GAAI,EAAE,YAAW,CAChF,EACI,SAAU,CACN,MAAOC,EAAAA,OAAOD,EAAM,QAAQ,UAAU,IAAI,EAAE,OAAO,EAAG,EAAE,YAAW,CAC3E,EACI,GAAI,CACA,OAAQ,CAChB,CACA,EAAE,EACIE,EAAYC,EAAS,SAAU,CAAE,MAAAC,EAAO,UAAAC,CAAS,EAAK,CACxD,IAAIC,EACJ,KAAM,CAAE,QAAAC,CAAO,EAAKT,EAAS,EACvB,CAACU,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAK,EAChCC,EAAWC,EAAAA,OAAO,IAAI,EACtBC,EAAUC,EAAAA,WAAWV,CAAK,EAC1B,CAAE,gBAAAW,CAAe,EAAKF,EACtBG,EAAmB,IAAM,CAC3BZ,EAAM,gBAAgBC,CAAS,CACnC,EACA,SAASY,GAAc,CACnBR,EAAQ,EAAK,CACjB,CACA,MAAMS,EAAaC,GAAM,CACrB,MAAMC,EAAIhB,EAAM,OAAO,CACnB,QAASe,EAAE,QACX,MAAOA,EAAE,KACrB,CAAS,EACKE,EAAIjB,EAAM,OAAO,CACnB,QAASe,EAAE,QACX,MAAOA,EAAE,GACrB,CAAS,EACD,OAAOC,GAAKC,EACN,CACE,MAAO,KAAK,IAAI,KAAK,IAAIA,EAAE,SAAWD,EAAE,QAAQ,EAAG,CAAC,EACpD,KAAM,KAAK,IAAIA,EAAE,SAAUC,EAAE,QAAQ,EAAIjB,EAAM,QAC/D,EACc,MACV,EACMkB,EAAMP,EAAgB,IAAIV,EAAU,YAAY,EAChDkB,EAAIL,EAAU,CAChB,GAAGb,EACH,SAAUC,EAAKgB,GAAQ,KAAyB,OAASA,EAAI,oBAAoBjB,EAAU,OAAO,KAAO,MAAQC,IAAO,OAASA,EAAKD,EAAU,OACxJ,CAAK,EACD,OAAOkB,EAAKC,EAAAA,KAAM,MAAO,CAAE,UAAWjB,EAAQ,UAAW,MAAO,CACxD,KAAMgB,EAAE,KACR,MAAOA,EAAE,KACrB,EAAW,SAAU,CAAC3B,EAAAA,IAAK6B,EAAS,CAAE,MAAO,iCAAkC,MAAO,GAAM,SAAU7B,EAAAA,IAAK8B,EAAY,CAAE,IAAKf,EAAU,UAAWJ,EAAQ,GAAI,QAAS,IAAM,CACtJE,EAAQ,EAAI,CAChB,EAAG,SAAUb,EAAAA,IAAKC,EAAU,CAAE,SAAU,QAAS,UAAWU,EAAQ,SAAU,CAAC,CAAE,CAAC,CAAE,EAAGX,EAAAA,IAAK+B,EAAAA,KAAM,CAAE,SAAUhB,EAAS,QAAS,gBAAiB,CAACiB,EAAQC,IAAa,CACvKA,EAAShB,CAAO,EAChBI,EAAW,CACf,EAAG,KAAMT,EAAM,QAASS,EAAa,UAAW,CAC5C,CACI,MAAO,oBACP,KAAMa,EACN,QAAS,IAAM,CACXd,EAAgB,CACpB,CACxB,EACoB,CACI,MAAO,8BACP,KAAMtB,EACN,QAAS,IAAM,CACX,IAAIqC,EAAiBlB,EAAQ,QAAQ,IAAI,cAAc,EAClDkB,IACDA,EAAiBlB,EAAQ,UAAU,qBAAsB,cAAc,GAE3EkB,EAAe,YAAY1B,CAAS,EACpCW,EAAgB,CACpB,CACxB,CACA,EAAmB,CAAC,CAAC,CAAE,EAAK,IAC5B,CAAC","x_google_ignoreList":[0,1,2]}