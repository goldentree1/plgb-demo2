{"version":3,"file":"drawFeatsCloud-CpYLjj7f.js","sources":["../node_modules/@jbrowse/plugin-alignments/esm/LinearReadCloudDisplay/drawFeatsCloud.js"],"sourcesContent":["import { max, min } from '@jbrowse/core/util';\nimport { drawFeatsCommon } from './drawFeatsCommon';\nfunction calculateCloudYOffsets(computedChains, self, _view, _featureHeight) {\n    const distances = computedChains.map(c => c.distance).filter(d => d > 0);\n    if (distances.length === 0) {\n        return { chainYOffsets: new Map() };\n    }\n    const logOffset = 10;\n    const maxD = Math.log(max(distances) + logOffset);\n    const minD = Math.log(min(distances) + logOffset);\n    const scaler = (self.height - 20) / (maxD - minD || 1);\n    const chainYOffsets = new Map();\n    for (const { id, distance } of computedChains) {\n        const top = distance > 0 ? (Math.log(distance + logOffset) - minD) * scaler : 0;\n        chainYOffsets.set(id, top);\n    }\n    return { chainYOffsets };\n}\nexport function drawFeats(self, ctx) {\n    drawFeatsCommon(self, ctx, calculateCloudYOffsets);\n}\n"],"names":["calculateCloudYOffsets","computedChains","self","_view","_featureHeight","distances","c","d","logOffset","maxD","max","minD","min","scaler","chainYOffsets","id","distance","top","drawFeats","ctx","drawFeatsCommon"],"mappings":"0HAEA,SAASA,EAAuBC,EAAgBC,EAAMC,EAAOC,EAAgB,CACzE,MAAMC,EAAYJ,EAAe,IAAIK,GAAKA,EAAE,QAAQ,EAAE,OAAOC,GAAKA,EAAI,CAAC,EACvE,GAAIF,EAAU,SAAW,EACrB,MAAO,CAAE,cAAe,IAAI,GAAK,EAErC,MAAMG,EAAY,GACZC,EAAO,KAAK,IAAIC,EAAAA,IAAIL,CAAS,EAAIG,CAAS,EAC1CG,EAAO,KAAK,IAAIC,EAAAA,IAAIP,CAAS,EAAIG,CAAS,EAC1CK,GAAUX,EAAK,OAAS,KAAOO,EAAOE,GAAQ,GAC9CG,EAAgB,IAAI,IAC1B,SAAW,CAAE,GAAAC,EAAI,SAAAC,CAAQ,IAAMf,EAAgB,CAC3C,MAAMgB,EAAMD,EAAW,GAAK,KAAK,IAAIA,EAAWR,CAAS,EAAIG,GAAQE,EAAS,EAC9EC,EAAc,IAAIC,EAAIE,CAAG,CAC7B,CACA,MAAO,CAAE,cAAAH,CAAa,CAC1B,CACO,SAASI,EAAUhB,EAAMiB,EAAK,CACjCC,EAAgBlB,EAAMiB,EAAKnB,CAAsB,CACrD","x_google_ignoreList":[0]}