import{l as De,n as Ae,r as T,q as He,j as l,v as ce,aN as Z,w as $e,x as Pe,b2 as Be,aL as Ue,y as q,aO as qe,o as O,u as I,bj as Ve,cD as Ke,m as W,h as j,cE as P,d as Te,U as Ge,T as te,K as Je,bO as Xe,ak as Ze,cF as ie,cG as L,cH as re,cI as ke,cJ as Qe,J as Ye,c as et}from"./rpcWorker-X0469dqW.js";import{M as de}from"./MenuItem-CxTol2m1.js";import{C as tt}from"./Clear-CjGNtFzz.js";import{B as ne}from"./Badge-BKK_x0o6.js";import{S as Ie}from"./SanitizedHTML-Clz1F4j3.js";import{F as it}from"./FormControlLabel-1s92K5sy.js";import{C as rt}from"./Checkbox-CZRpP34h.js";function nt(e){return De("MuiFab",e)}const ue=Ae("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),st=e=>{const{color:t,variant:i,classes:n,size:s}=e,a={root:["root",i,`size${Z(s)}`,t==="inherit"?"colorInherit":t]},o=$e(a,nt,n);return{...n,...o}},at=Pe(Be,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Ue(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${Z(i.size)}`],i.color==="inherit"&&t.colorInherit,t[Z(i.size)],t[i.color]]}})(q(({theme:e})=>{var t,i;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(i=(t=e.palette).getContrastText)==null?void 0:i.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${ue.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),q(({theme:e})=>({variants:[...Object.entries(e.palette).filter(qe(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),q(({theme:e})=>({[`&.${ue.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),ot=T.forwardRef(function(t,i){const n=He({props:t,name:"MuiFab"}),{children:s,className:a,color:o="default",component:c="button",disabled:h=!1,disableFocusRipple:u=!1,focusVisibleClassName:_,size:x="large",variant:d="circular",...m}=n,p={...n,color:o,component:c,disabled:h,disableFocusRipple:u,size:x,variant:d},r=st(p);return l.jsx(at,{className:ce(r.root,a),component:c,disabled:h,focusRipple:!u,focusVisibleClassName:ce(r.focusVisible,_),ownerState:p,ref:i,...m,classes:r,children:s})});let w;typeof window<"u"?w=window:typeof self<"u"?w=self:w=global;let Q=null,Y=null;const he=20,V=w.clearTimeout,fe=w.setTimeout,K=w.cancelAnimationFrame||w.mozCancelAnimationFrame||w.webkitCancelAnimationFrame,ge=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame;K==null||ge==null?(Q=V,Y=function(t){return fe(t,he)}):(Q=function([t,i]){K(t),V(i)},Y=function(t){const i=ge(function(){V(n),t()}),n=fe(function(){K(i),t()},he);return[i,n]});function lt(e){let t,i,n,s,a,o,c;const h=typeof document<"u"&&document.attachEvent;if(!h){o=function(g){const b=g.__resizeTriggers__,v=b.firstElementChild,y=b.lastElementChild,S=v.firstElementChild;y.scrollLeft=y.scrollWidth,y.scrollTop=y.scrollHeight,S.style.width=v.offsetWidth+1+"px",S.style.height=v.offsetHeight+1+"px",v.scrollLeft=v.scrollWidth,v.scrollTop=v.scrollHeight},a=function(g){return g.offsetWidth!==g.__resizeLast__.width||g.offsetHeight!==g.__resizeLast__.height},c=function(g){if(g.target.className&&typeof g.target.className.indexOf=="function"&&g.target.className.indexOf("contract-trigger")<0&&g.target.className.indexOf("expand-trigger")<0)return;const b=this;o(this),this.__resizeRAF__&&Q(this.__resizeRAF__),this.__resizeRAF__=Y(function(){a(b)&&(b.__resizeLast__.width=b.offsetWidth,b.__resizeLast__.height=b.offsetHeight,b.__resizeListeners__.forEach(function(S){S.call(b,g)}))})};let d=!1,m="";n="animationstart";const p="Webkit Moz O ms".split(" ");let r="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="";{const g=document.createElement("fakeelement");if(g.style.animationName!==void 0&&(d=!0),d===!1){for(let b=0;b<p.length;b++)if(g.style[p[b]+"AnimationName"]!==void 0){f=p[b],m="-"+f.toLowerCase()+"-",n=r[b],d=!0;break}}}i="resizeanim",t="@"+m+"keyframes "+i+" { from { opacity: 0; } to { opacity: 0; } } ",s=m+"animation: 1ms "+i+"; "}const u=function(d){if(!d.getElementById("detectElementResize")){const m=(t||"")+".resize-triggers { "+(s||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',p=d.head||d.getElementsByTagName("head")[0],r=d.createElement("style");r.id="detectElementResize",r.type="text/css",e!=null&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=m:r.appendChild(d.createTextNode(m)),p.appendChild(r)}};return{addResizeListener:function(d,m){if(h)d.attachEvent("onresize",m);else{if(!d.__resizeTriggers__){const p=d.ownerDocument,r=w.getComputedStyle(d);r&&r.position==="static"&&(d.style.position="relative"),u(p),d.__resizeLast__={},d.__resizeListeners__=[],(d.__resizeTriggers__=p.createElement("div")).className="resize-triggers";const f=p.createElement("div");f.className="expand-trigger",f.appendChild(p.createElement("div"));const g=p.createElement("div");g.className="contract-trigger",d.__resizeTriggers__.appendChild(f),d.__resizeTriggers__.appendChild(g),d.appendChild(d.__resizeTriggers__),o(d),d.addEventListener("scroll",c,!0),n&&(d.__resizeTriggers__.__animationListener__=function(v){v.animationName===i&&o(d)},d.__resizeTriggers__.addEventListener(n,d.__resizeTriggers__.__animationListener__))}d.__resizeListeners__.push(m)}},removeResizeListener:function(d,m){if(h)d.detachEvent("onresize",m);else if(d.__resizeListeners__.splice(d.__resizeListeners__.indexOf(m),1),!d.__resizeListeners__.length){d.removeEventListener("scroll",c,!0),d.__resizeTriggers__.__animationListener__&&(d.__resizeTriggers__.removeEventListener(n,d.__resizeTriggers__.__animationListener__),d.__resizeTriggers__.__animationListener__=null);try{d.__resizeTriggers__=!d.removeChild(d.__resizeTriggers__)}catch{}}}}}class ct extends T.Component{constructor(...t){super(...t),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:i,disableWidth:n,onResize:s}=this.props;if(this._parentNode){const a=window.getComputedStyle(this._parentNode)||{},o=parseFloat(a.paddingLeft||"0"),c=parseFloat(a.paddingRight||"0"),h=parseFloat(a.paddingTop||"0"),u=parseFloat(a.paddingBottom||"0"),_=this._parentNode.getBoundingClientRect(),x=_.height-h-u,d=_.width-o-c;if(!i&&this.state.height!==x||!n&&this.state.width!==d){this.setState({height:x,width:d});const m=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof s=="function"&&s({height:x,width:d,get scaledHeight(){return m(),x},get scaledWidth(){return m(),d}})}}},this._setRef=i=>{this._autoSizer=i}}componentDidMount(){const{nonce:t}=this.props,i=this._autoSizer?this._autoSizer.parentNode:null;if(i!=null&&i.ownerDocument&&i.ownerDocument.defaultView&&i instanceof i.ownerDocument.defaultView.HTMLElement){this._parentNode=i;const n=i.ownerDocument.defaultView.ResizeObserver;n!=null?(this._resizeObserver=new n(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(i)):(this._detectElementResize=lt(t),this._detectElementResize.addResizeListener(i,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:t,defaultHeight:i,defaultWidth:n,disableHeight:s=!1,disableWidth:a=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:c,onResize:h,style:u={},tagName:_="div",...x}=this.props,{height:d,width:m}=this.state,p={overflow:"visible"},r={};let f=!1;return s||(d===0&&(f=!0),p.height=0,r.height=d,r.scaledHeight=d),a||(m===0&&(f=!0),p.width=0,r.width=m,r.scaledWidth=m),o&&(f=!1),T.createElement(_,{ref:this._setRef,style:{...p,...u},...x},!f&&t(r))}}const dt=W()(e=>({fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)}})),ut=O(function({model:e}){const{classes:t}=dt(),i=I.getSession(e),[n,s]=T.useState(null);function a(){s(null)}const o=I.isSessionModelWithConnections(i),c=I.isSessionWithAddTracks(i);return c||o?l.jsxs(l.Fragment,{children:[l.jsx(ot,{color:"secondary",className:t.fab,onClick:h=>{s(h.currentTarget)},children:l.jsx(Ve,{})}),l.jsxs(Ke,{anchorEl:n,open:!!n,onClose:()=>{s(null)},children:[o?l.jsx(de,{onClick:()=>{a(),I.isSessionModelWithWidgets(i)&&i.showWidget(i.addWidget("AddConnectionWidget","addConnectionWidget"))},children:"Add connection"}):null,c?l.jsx(de,{onClick:()=>{a(),I.isSessionModelWithWidgets(i)&&i.showWidget(i.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))},children:"Add track"}):null]})]}):null});var ht=j(l.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}));const ft=T.lazy(()=>import("./FacetedDialog-DgHgFijT.js")),gt=T.lazy(()=>import("./CloseConnectionDialog-CrKM30Ec.js")),pt=T.lazy(()=>import("./DeleteConnectionDialog-r7Iv_8vw.js")),mt=T.lazy(()=>import("./ManageConnectionsDialog-Bqoa2gDn.js")),vt=T.lazy(()=>import("./ToggleConnectionsDialog-DOuknQa3.js")),bt=O(function({model:e}){const t=I.getSession(e),[i,n]=T.useState(),[s,a]=T.useState(),[o,c]=T.useState(!1),[h,u]=T.useState(!1),[_,x]=T.useState(!1);function d(m,p){var r;const f=Te.readConfObject(m,"name"),g=(r=t.prepareToBreakConnection)===null||r===void 0?void 0:r.call(t,m);if(g){const[b,v]=g;Object.keys(v).length>0?n({connectionConf:m,safelyBreakConnection:b,dereferenceTypeCount:v,name:f}):b()}p&&a({name:f,connectionConf:m})}return l.jsxs(l.Fragment,{children:[l.jsx(P,{menuItems:[{label:"Open faceted track selector",onClick:()=>{x(!0)}},...I.isSessionWithAddTracks(t)?[{label:"Add track...",onClick:()=>{I.isSessionModelWithWidgets(t)&&t.showWidget(t.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))}}]:[],{label:"Connections...",subMenu:[...I.isSessionModelWithConnections(t)?[{label:"Turn on/off connections...",onClick:()=>{c(!0)}}]:[],...I.isSessionModelWithConnectionEditing(t)?[{label:"Add connection...",onClick:()=>{I.isSessionModelWithWidgets(t)&&t.showWidget(t.addWidget("AddConnectionWidget","addConnectionWidget"))}},{label:"Delete connections...",onClick:()=>{u(!0)}}]:[]]},{label:"Sort...",type:"subMenu",subMenu:[{label:"Sort tracks by name",type:"checkbox",checked:e.activeSortTrackNames,onClick:()=>{e.setSortTrackNames(!e.activeSortTrackNames)}},{label:"Sort categories by name",type:"checkbox",checked:e.activeSortCategories,onClick:()=>{e.setSortCategories(!e.activeSortCategories)}}]},{label:"Collapse...",type:"subMenu",subMenu:[...e.hasAnySubcategories?[{label:"Collapse subcategories",onClick:()=>{e.collapseSubCategories()}}]:[],{label:"Collapse top-level categories",onClick:()=>{e.collapseTopLevelCategories()}},{label:"Expand all categories",onClick:()=>{e.expandAllCategories()}}]}],children:l.jsx(ht,{})}),l.jsxs(T.Suspense,{fallback:null,children:[i?l.jsx(gt,{modalInfo:i,onClose:()=>{n(void 0)}}):null,s?l.jsx(pt,{handleClose:()=>{a(void 0)},deleteDialogDetails:s,session:t}):null,h?l.jsx(mt,{handleClose:()=>{u(!1)},breakConnection:d,session:t}):null,o?l.jsx(vt,{handleClose:()=>{c(!1)},session:t,breakConnection:d}):null,_?l.jsx(ft,{handleClose:()=>{x(!1)},model:e}):null]})]})});var _t=j(l.jsx("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}));const St=O(function({model:e}){const t=I.getSession(e),{selection:i}=e,{pluginManager:n}=I.getEnv(e),{adminMode:s,sessionTracks:a}=t,o=new Set(a==null?void 0:a.map(u=>u.trackId)),c=u=>s||o.has(u),h=n.evaluateExtensionPoint("TrackSelector-multiTrackMenuItems",[],{session:t});return i.length?l.jsx(P,{menuItems:[{label:"Clear selection",onClick:()=>{e.clearSelection()}},...i.every(u=>c(u.trackId))?[{label:"Delete tracks",onClick:()=>{var u;for(const _ of i)(u=t.deleteTrackConf)===null||u===void 0||u.call(t,_)}}]:[],...h.map(u=>({...u,..."onClick"in u?{onClick:()=>{u.onClick(e)}}:{}}))],children:l.jsx(ne,{badgeContent:i.length,color:"primary",children:l.jsx(_t,{})})}):null});var yt=j(l.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),ze=j(l.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),xt=j(l.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Ct=j(l.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}));const Tt=W()({cascadingStyle:{padding:0}}),we=function({id:e,trackId:t,stopPropagation:i,model:n,setOpen:s,conf:a}){var o,c;const{classes:h}=Tt();return l.jsx(P,{className:h.cascadingStyle,stopPropagation:i,setOpen:s,"data-testid":`htsTrackEntryMenu-${e}`,menuItems:[...((c=(o=I.getSession(n)).getTrackActionMenuItems)===null||c===void 0?void 0:c.call(o,a))||[],n.isFavorite(t)?{label:"Remove from favorites",onClick:()=>{n.removeFromFavorites(t)},icon:Ct}:{label:"Add to favorites",onClick:()=>{n.addToFavorites(t)},icon:xt},{label:"Add to selection",onClick:()=>{n.addToSelection([a])}},...n.isSelected(a)?[{label:"Remove from selection",onClick:()=>{n.removeFromSelection([a])}}]:[]],children:l.jsx(ze,{})})},Me=O(function({model:e,tracks:t,extraMenuItems:i,children:n,onClick:s}){const{view:a}=e,[o,c]=T.useState(!1),h=I.getSession(e);return a?l.jsx(P,{closeAfterItemClick:!1,onClick:s,menuItems:[...t.map(u=>({type:"checkbox",label:l.jsxs(l.Fragment,{children:[l.jsx(Ie,{html:Ge.getTrackName(u,h)})," ",l.jsx(we,{id:u.trackId,trackId:u.trackId,model:e,conf:u,setOpen:c,stopPropagation:!0})]}),checked:a.tracks.some(_=>_.configuration===u),onClick:()=>{o||e.view.toggleTrack(u.trackId)&&e.addToRecentlyUsed(u.trackId)}})),...i],children:n}):null}),kt=W()({smallBadge:{height:14},margin:{marginRight:10}}),It=O(function({model:e}){const{classes:t}=kt(),{view:i,favoriteTracks:n}=e;return i?l.jsx(Me,{onClick:()=>{e.setFavoritesCounter(0)},tracks:n,model:e,extraMenuItems:n.length?[{type:"divider"},{label:"Clear favorites",onClick:()=>{e.clearFavorites()}}]:[{label:"No favorite tracks yet",onClick:()=>{}}],children:l.jsx(te,{title:"Favorite tracks",children:l.jsx(ne,{classes:{badge:t.smallBadge},color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"right"},className:t.margin,badgeContent:e.favoritesCounter,children:l.jsx(yt,{})})})}):null});var zt=j(l.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}));const wt=W()({smallBadge:{height:14}}),Mt=O(function({model:e}){const{classes:t}=wt(),{view:i,recentlyUsedCounter:n,recentlyUsedTracks:s}=e;return i?l.jsx(Me,{onClick:()=>{e.setRecentlyUsedCounter(0)},model:e,tracks:s,extraMenuItems:s.length?[{type:"divider"},{label:"Clear recently used",onClick:()=>{e.clearRecentlyUsed()}}]:[{label:"No recently used",onClick:()=>{}}],children:l.jsx(te,{title:"Recently used tracks",children:l.jsx(ne,{classes:{badge:t.smallBadge},anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"secondary",badgeContent:n,children:l.jsx(zt,{})})})}):null}),Ot=W()(e=>({searchBox:{margin:e.spacing(2)}})),jt=O(function({model:e}){const{filterText:t}=e,{classes:i}=Ot();return l.jsx(Je,{className:i.searchBox,label:"Filter tracks",value:t,onChange:n=>{e.setFilterText(n.target.value)},fullWidth:!0,slotProps:{input:{endAdornment:l.jsx(Xe,{position:"end",children:l.jsx(Ze,{onClick:()=>{e.clearFilterText()},children:l.jsx(tt,{})})})}}})}),Rt=O(function({model:e,setHeaderHeight:t}){return l.jsx("div",{ref:i=>{t((i==null?void 0:i.getBoundingClientRect().height)||0)},"data-testid":"hierarchical_track_selector",children:l.jsxs("div",{style:{display:"flex"},children:[l.jsx(bt,{model:e}),l.jsx(St,{model:e}),l.jsx(jt,{model:e}),l.jsx(Mt,{model:e}),l.jsx(It,{model:e})]})})});var pe=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Et(e,t){return!!(e===t||pe(e)&&pe(t))}function Wt(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!Et(e[i],t[i]))return!1;return!0}function G(e,t){t===void 0&&(t=Wt);var i,n=[],s,a=!1;function o(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return a&&i===this&&t(c,n)||(s=e.apply(this,c),a=!0,i=this,n=c),s}return o}var Lt=typeof performance=="object"&&typeof performance.now=="function",me=Lt?function(){return performance.now()}:function(){return Date.now()};function ve(e){cancelAnimationFrame(e.id)}function Ft(e,t){var i=me();function n(){me()-i>=t?e.call(null):s.id=requestAnimationFrame(n)}var s={id:requestAnimationFrame(n)};return s}var J=-1;function be(e){if(e===void 0&&(e=!1),J===-1||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),J=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return J}var D=null;function _e(e){if(e===void 0&&(e=!1),D===null||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var n=document.createElement("div"),s=n.style;return s.width="100px",s.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?D="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?D="negative":D="positive-ascending"),document.body.removeChild(t),D}return D}var Nt=150,Dt=function(t,i){return t};function At(e){var t,i=e.getItemOffset,n=e.getEstimatedTotalSize,s=e.getItemSize,a=e.getOffsetForIndexAndAlignment,o=e.getStartIndexForOffset,c=e.getStopIndexForStartIndex,h=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,_=e.validateProps;return t=(function(x){ie(d,x);function d(p){var r;return r=x.call(this,p)||this,r._instanceProps=h(r.props,L(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:L(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof r.props.initialScrollOffset=="number"?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=G(function(f,g,b,v){return r.props.onItemsRendered({overscanStartIndex:f,overscanStopIndex:g,visibleStartIndex:b,visibleStopIndex:v})}),r._callOnScroll=void 0,r._callOnScroll=G(function(f,g,b){return r.props.onScroll({scrollDirection:f,scrollOffset:g,scrollUpdateWasRequested:b})}),r._getItemStyle=void 0,r._getItemStyle=function(f){var g=r.props,b=g.direction,v=g.itemSize,y=g.layout,S=r._getItemStyleCache(u&&v,u&&y,u&&b),C;if(S.hasOwnProperty(f))C=S[f];else{var k=i(r.props,f,r._instanceProps),M=s(r.props,f,r._instanceProps),z=b==="horizontal"||y==="horizontal",R=b==="rtl",F=z?k:0;S[f]=C={position:"absolute",left:R?void 0:F,right:R?F:void 0,top:z?0:k,height:z?"100%":M,width:z?M:"100%"}}return C},r._getItemStyleCache=void 0,r._getItemStyleCache=G(function(f,g,b){return{}}),r._onScrollHorizontal=function(f){var g=f.currentTarget,b=g.clientWidth,v=g.scrollLeft,y=g.scrollWidth;r.setState(function(S){if(S.scrollOffset===v)return null;var C=r.props.direction,k=v;if(C==="rtl")switch(_e()){case"negative":k=-v;break;case"positive-descending":k=y-b-v;break}return k=Math.max(0,Math.min(k,y-b)),{isScrolling:!0,scrollDirection:S.scrollOffset<k?"forward":"backward",scrollOffset:k,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._onScrollVertical=function(f){var g=f.currentTarget,b=g.clientHeight,v=g.scrollHeight,y=g.scrollTop;r.setState(function(S){if(S.scrollOffset===y)return null;var C=Math.max(0,Math.min(y,v-b));return{isScrolling:!0,scrollDirection:S.scrollOffset<C?"forward":"backward",scrollOffset:C,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(f){var g=r.props.outerRef;r._outerRef=f,typeof g=="function"?g(f):g!=null&&typeof g=="object"&&g.hasOwnProperty("current")&&(g.current=f)},r._resetIsScrollingDebounced=function(){r._resetIsScrollingTimeoutId!==null&&ve(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Ft(r._resetIsScrolling,Nt)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1,null)})},r}d.getDerivedStateFromProps=function(r,f){return Ht(r,f),_(r),null};var m=d.prototype;return m.scrollTo=function(r){r=Math.max(0,r),this.setState(function(f){return f.scrollOffset===r?null:{scrollDirection:f.scrollOffset<r?"forward":"backward",scrollOffset:r,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},m.scrollToItem=function(r,f){f===void 0&&(f="auto");var g=this.props,b=g.itemCount,v=g.layout,y=this.state.scrollOffset;r=Math.max(0,Math.min(r,b-1));var S=0;if(this._outerRef){var C=this._outerRef;v==="vertical"?S=C.scrollWidth>C.clientWidth?be():0:S=C.scrollHeight>C.clientHeight?be():0}this.scrollTo(a(this.props,r,f,y,this._instanceProps,S))},m.componentDidMount=function(){var r=this.props,f=r.direction,g=r.initialScrollOffset,b=r.layout;if(typeof g=="number"&&this._outerRef!=null){var v=this._outerRef;f==="horizontal"||b==="horizontal"?v.scrollLeft=g:v.scrollTop=g}this._callPropsCallbacks()},m.componentDidUpdate=function(){var r=this.props,f=r.direction,g=r.layout,b=this.state,v=b.scrollOffset,y=b.scrollUpdateWasRequested;if(y&&this._outerRef!=null){var S=this._outerRef;if(f==="horizontal"||g==="horizontal")if(f==="rtl")switch(_e()){case"negative":S.scrollLeft=-v;break;case"positive-ascending":S.scrollLeft=v;break;default:var C=S.clientWidth,k=S.scrollWidth;S.scrollLeft=k-C-v;break}else S.scrollLeft=v;else S.scrollTop=v}this._callPropsCallbacks()},m.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&ve(this._resetIsScrollingTimeoutId)},m.render=function(){var r=this.props,f=r.children,g=r.className,b=r.direction,v=r.height,y=r.innerRef,S=r.innerElementType,C=r.innerTagName,k=r.itemCount,M=r.itemData,z=r.itemKey,R=z===void 0?Dt:z,F=r.layout,B=r.outerElementType,N=r.outerTagName,E=r.style,Ee=r.useIsScrolling,We=r.width,se=this.state.isScrolling,U=b==="horizontal"||F==="horizontal",Le=U?this._onScrollHorizontal:this._onScrollVertical,ae=this._getRangeToRender(),Fe=ae[0],Ne=ae[1],oe=[];if(k>0)for(var $=Fe;$<=Ne;$++)oe.push(T.createElement(f,{data:M,key:R($,M),index:$,isScrolling:Ee?se:void 0,style:this._getItemStyle($)}));var le=n(this.props,this._instanceProps);return T.createElement(B||N||"div",{className:g,onScroll:Le,ref:this._outerRefSetter,style:re({position:"relative",height:v,width:We,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:b},E)},T.createElement(S||C||"div",{children:oe,ref:y,style:{height:U?"100%":le,pointerEvents:se?"none":void 0,width:U?le:"100%"}}))},m._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var r=this.props.itemCount;if(r>0){var f=this._getRangeToRender(),g=f[0],b=f[1],v=f[2],y=f[3];this._callOnItemsRendered(g,b,v,y)}}if(typeof this.props.onScroll=="function"){var S=this.state,C=S.scrollDirection,k=S.scrollOffset,M=S.scrollUpdateWasRequested;this._callOnScroll(C,k,M)}},m._getRangeToRender=function(){var r=this.props,f=r.itemCount,g=r.overscanCount,b=this.state,v=b.isScrolling,y=b.scrollDirection,S=b.scrollOffset;if(f===0)return[0,0,0,0];var C=o(this.props,S,this._instanceProps),k=c(this.props,C,S,this._instanceProps),M=!v||y==="backward"?Math.max(1,g):1,z=!v||y==="forward"?Math.max(1,g):1;return[Math.max(0,C-M),Math.max(0,Math.min(f-1,k+z)),C,k]},d})(T.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Ht=function(t,i){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,i.instance},$t=50,H=function(t,i,n){var s=t,a=s.itemSize,o=n.itemMetadataMap,c=n.lastMeasuredIndex;if(i>c){var h=0;if(c>=0){var u=o[c];h=u.offset+u.size}for(var _=c+1;_<=i;_++){var x=a(_);o[_]={offset:h,size:x},h+=x}n.lastMeasuredIndex=i}return o[i]},Pt=function(t,i,n){var s=i.itemMetadataMap,a=i.lastMeasuredIndex,o=a>0?s[a].offset:0;return o>=n?Oe(t,i,a,0,n):Bt(t,i,Math.max(0,a),n)},Oe=function(t,i,n,s,a){for(;s<=n;){var o=s+Math.floor((n-s)/2),c=H(t,o,i).offset;if(c===a)return o;c<a?s=o+1:c>a&&(n=o-1)}return s>0?s-1:0},Bt=function(t,i,n,s){for(var a=t.itemCount,o=1;n<a&&H(t,n,i).offset<s;)n+=o,o*=2;return Oe(t,i,Math.min(n,a-1),Math.floor(n/2),s)},Se=function(t,i){var n=t.itemCount,s=i.itemMetadataMap,a=i.estimatedItemSize,o=i.lastMeasuredIndex,c=0;if(o>=n&&(o=n-1),o>=0){var h=s[o];c=h.offset+h.size}var u=n-o-1,_=u*a;return c+_},Ut=At({getItemOffset:function(t,i,n){return H(t,i,n).offset},getItemSize:function(t,i,n){return n.itemMetadataMap[i].size},getEstimatedTotalSize:Se,getOffsetForIndexAndAlignment:function(t,i,n,s,a,o){var c=t.direction,h=t.height,u=t.layout,_=t.width,x=c==="horizontal"||u==="horizontal",d=x?_:h,m=H(t,i,a),p=Se(t,a),r=Math.max(0,Math.min(p-d,m.offset)),f=Math.max(0,m.offset-d+m.size+o);switch(n==="smart"&&(s>=f-d&&s<=r+d?n="auto":n="center"),n){case"start":return r;case"end":return f;case"center":return Math.round(f+(r-f)/2);case"auto":default:return s>=f&&s<=r?s:s<f?f:r}},getStartIndexForOffset:function(t,i,n){return Pt(t,n,i)},getStopIndexForStartIndex:function(t,i,n,s){for(var a=t.direction,o=t.height,c=t.itemCount,h=t.layout,u=t.width,_=a==="horizontal"||h==="horizontal",x=_?u:o,d=H(t,i,s),m=n+x,p=d.offset+d.size,r=i;r<c-1&&p<m;)r++,p+=H(t,r,s).size;return r},initInstanceProps:function(t,i){var n=t,s=n.estimatedItemSize,a={itemMetadataMap:{},estimatedItemSize:s||$t,lastMeasuredIndex:-1};return i.resetAfterIndex=function(o,c){c===void 0&&(c=!0),a.lastMeasuredIndex=Math.min(a.lastMeasuredIndex,o-1),i._getItemStyleCache(-1),c&&i.forceUpdate()},a},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});function qt(e){return function(t){e.forEach(function(i){typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var X=function(){},Vt=function(t,i){return i===void 0&&(i=null),{child:null,isShown:i?i.public.isOpen&&i.isShown:!0,parent:i,public:t,sibling:null,visited:!1}},Kt=function(t,i){var n=i.getRecordData,s=n(t),a=s.data.id;return a},Gt=function(t){var i=t.index,n=t.data,s=n.component,a=n.getRecordData,o=n.treeData,c=t.style,h=t.isScrolling,u=a(i);return ke.createElement(s,Object.assign({isScrolling:h,style:c,treeData:o},u))},Jt=function(t,i,n){var s=t.createRecord,a=i.buildingTaskTimeout,o=i.placeholder,c=i.async,h=c===void 0?!1:c,u=i.treeWalker,_=h&&n.records!==void 0,x=n.records,d=[],m=new Map,p=a?{timeout:a}:void 0,r=new WeakMap,f=u(),g=f.next(),b=g.value,v=s(b.data,n,void 0,_?x.get(b.data.id):void 0);m.set(v.public.data.id,v),r.set(v,b);var y=v,S=!0,C=v,k=o!==void 0&&!(o===null&&!n.order),M=k?function(R){return R.timeRemaining()>0}:function(){return!0},z=function R(F){for(;y!==null;){if(!M(F)){requestIdleCallback(R,p);return}if(y.visited)y.visited=!1,y=y.sibling!==null?y.sibling:y.parent,C=y;else{var B=f.next(r.get(y)),N=B.value;if(N===void 0){S?S=!1:(y.isShown&&d.push(y.public.data.id),y.visited=y.child!==null,y=y.child!==null?y.child:y.sibling!==null?y.sibling:y.parent),C=y;continue}var E=s(N.data,n,S?void 0:y,_?x.get(N.data.id):void 0);m.set(E.public.data.id,E),r.set(E,N),!S&&C===y?C.child=E:C.sibling=E,C=E}}k&&n.setState({order:d,records:m,updateRequest:{}})};return k?requestIdleCallback(z,p):z(),o!==void 0&&h&&n.order?n:{order:d,records:m}},ye=32768,Xt=2,Zt=function(t,i){var n=t.order,s=t.records,a=i.opennessState;if(typeof a!="object")return null;for(var o in a)if(s.has(o)){var c=a[o],h=s.get(o),u=typeof c=="boolean"?{open:c}:c,_=u.open,x=u.subtreeCallback,d=x===void 0?X:x,m=X,p=X;h.isShown&&(_?(function(){for(var f=n.indexOf(o),g=h;g!==null;){if(g.sibling!==null){g=g.sibling;break}g=g.parent}var b=g===null?n.length-1-f:n.indexOf(g.public.data.id)-1-f,v=[[f+1,b]];m=function(S){if(S.isShown=S.parent?S.parent.public.isOpen&&S.parent.isShown:!0,S.isShown){var C=v[v.length-1];C.push(S.public.data.id),C.length===ye+Xt&&v.push([f+1+ye*v.length,0])}},p=function(){for(var S=0;S<v.length;S++){var C;(C=n).splice.apply(C,v[S])}}})():h.public.isOpen&&(function(){var f=n.indexOf(o),g=0;m=function(v){v.isShown&&(g+=1),v.isShown=v.parent?v.parent.public.isOpen&&v.parent.isShown:!0},p=function(){n.splice(f+1,g)}})());for(var r=h;r!==null;)r.visited?(r.visited=!1,r=r===h?null:r.sibling!==null?r.sibling:r.parent):(r.public.isOpen=r===h?_:r.public.isOpen,d(r.public,h.public),r!==h&&m(r),r.visited=r.child!==null,r=r.child!==null?r.child:r===h?null:r.sibling!==null?r.sibling:r.parent);p()}return{order:n,records:s,updateRequest:{}}},Qt=function(t){return function(i,n,s){return s.refresh?Jt(t,i,n):Zt(n,s)}},je=(function(e){ie(t,e),t.getDerivedStateFromProps=function(s,a){var o=s.listRef,c=o===void 0?null:o,h=s.treeWalker,u=a.computeTree,_=a.list,x=a.order,d=a.treeWalker;return re({attachRefs:qt([_,c])},h!==d||!x?u(s,a,{refresh:!0}):null,{treeWalker:h})};function t(n,s){var a;return a=e.call(this,n,s)||this,a.getRecordData=a.getRecordData.bind(L(a)),a.state={list:T.createRef(),recomputeTree:a.recomputeTree.bind(L(a)),setState:a.setState.bind(L(a))},a}var i=t.prototype;return i.getItemData=function(){var s=this.props,a=s.children,o=s.itemData;return{component:a,getRecordData:this.getRecordData,treeData:o}},i.getRecordData=function(s){var a=this.state,o=a.order,c=a.records;return c.get(o[s]).public},i.recomputeTree=function(s){var a=this;return new Promise(function(o){a.setState(function(c){return c.computeTree(a.props,c,{opennessState:s})},o)})},i.scrollTo=function(s){var a;(a=this.state.list.current)==null||a.scrollTo(s)},i.scrollToItem=function(s,a){var o;(o=this.state.list.current)==null||o.scrollToItem(this.state.order.indexOf(s),a)},t})(T.PureComponent);je.defaultProps={rowComponent:Gt};var Yt=Qt({createRecord:function(t,i,n,s){var a=i.recomputeTree,o=i.resetAfterId,c=Vt({data:t,height:s?s.public.height:t.defaultHeight,isOpen:s?s.public.isOpen:t.isOpenByDefault,resize:function(u,_){c.public.height=u,o(c.public.data.id,_)},setOpen:function(u){var _;return a((_={},_[t.id]=u,_))}},n);return c}}),ei=(function(e){ie(t,e);function t(n,s){var a;return a=e.call(this,n,s)||this,a.getItemSize=a.getItemSize.bind(L(a)),a.state=re({},a.state,{computeTree:Yt,resetAfterId:a.resetAfterId.bind(L(a))}),a}var i=t.prototype;return i.resetAfterId=function(s,a){var o;a===void 0&&(a=!1);var c=this.state,h=c.list,u=c.order;(o=h.current)==null||o.resetAfterIndex(u.indexOf(s),a)},i.recomputeTree=function(s){var a=this;return e.prototype.recomputeTree.call(this,s).then(function(){var o;(o=a.state.list.current)==null||o.resetAfterIndex(0,!0)})},i.render=function(){var s=this.props;s.children;var a=s.placeholder,o=s.itemSize,c=s.rowComponent;s.treeWalker;var h=Qe(s,["children","placeholder","itemSize","rowComponent","treeWalker"]),u=this.state,_=u.attachRefs,x=u.order;return a&&x.length===0?a:ke.createElement(Ut,Object.assign({},h,{itemCount:x.length,itemData:this.getItemData(),itemKey:Kt,itemSize:o??this.getItemSize,ref:_}),c)},i.getItemSize=function(s){return this.getRecordData(s).height},t})(je),ti=j(l.jsx("path",{d:"m7 10 5 5 5-5z"})),ii=j(l.jsx("path",{d:"m10 17 5-5-5-5z"}));function ee(e){return(e==null?void 0:e.type)==="category"?e.children.flatMap(t=>t.type==="category"?ee(t):t.conf):[]}function A(e,t=new Map){e.id&&e.children.length&&t.set(e.id,e);for(const i of e.children)A(i,t);return t}function ri(e=""){return e.endsWith("(Unsupported)")||e.endsWith("(Unknown)")}function Re(e){const t=[];if(e.type==="category")for(const i of e.children)i.type==="category"&&t.push(i.id,...Re(i));return t}const ni=W()(e=>({contrastColor:{color:e.palette.tertiary.contrastText},accordionText:{margin:"auto 0",width:"100%"}}));function si({isOpen:e,setOpen:t,data:i}){const{classes:n}=ni(),[s,a]=T.useState(!1),{menuItems:o=[],name:c,model:h,id:u,tree:_}=i,x=A(_).get(u),d=x?Re(x):[],m=d.length>0;return l.jsx("div",{className:n.accordionText,onClick:()=>{s||(i.toggleCollapse(u),t(!e))},children:l.jsxs(Ye,{"data-testid":`htsCategory-${c}`,children:[e?l.jsx(ti,{}):l.jsx(ii,{}),c,l.jsx(et.CascadingMenuButton,{menuItems:[{label:"Add to selection",onClick:()=>{const p=A(_).get(u);h.addToSelection(ee(p))},helpText:"Add all tracks in this category to the current selection. This allows you to perform bulk operations on multiple tracks at once, such as configuring settings or exporting track configurations."},{label:"Remove from selection",onClick:()=>{const p=A(_).get(u);h.removeFromSelection(ee(p))},helpText:"Remove all tracks in this category from the current selection. Use this to deselect tracks that were previously added to your selection."},{label:"Show all",onClick:()=>{var p;for(const r of((p=A(_).get(u))===null||p===void 0?void 0:p.children)||[])r.type==="track"&&h.view.showTrack(r.trackId)},helpText:"Display all tracks in this category on the current view. This is useful when you want to visualize multiple related tracks simultaneously to compare their data."},{label:"Hide all",onClick:()=>{var p;for(const r of((p=A(_).get(u))===null||p===void 0?void 0:p.children)||[])r.type==="track"&&h.view.hideTrack(r.trackId)},helpText:"Hide all tracks in this category from the current view. This helps declutter your view by removing tracks you are not currently analyzing."},...m?[{label:"Collapse all subcategories",onClick:()=>{for(const p of d)h.collapsed.get(p)||h.toggleCategory(p)},helpText:"Collapse all nested subcategories within this category. This provides a cleaner, more compact view of the track hierarchy by hiding the detailed contents of subcategories."},{label:"Expand all subcategories",onClick:()=>{for(const p of d)h.collapsed.get(p)&&h.toggleCategory(p)},helpText:"Expand all nested subcategories within this category. This reveals all tracks and subcategories at once, making it easier to browse and select tracks from the entire hierarchy."}]:[],...o],className:n.contrastColor,stopPropagation:!0,setOpen:a,children:l.jsx(ze,{})})]})})}const ai=W()(e=>({compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:e.palette.action.selected}},selected:{background:"#cccc"}}));function oi({data:e}){const{classes:t}=ai(),{checked:i,conf:n,model:s,drawerPosition:a,id:o,trackId:c,name:h,selected:u,onChange:_}=e,x=Te.readConfObject(n,"description");return l.jsxs(l.Fragment,{children:[l.jsx(te,{title:x+(u?" (in selection)":""),placement:a==="left"?"right":"left",children:l.jsx(it,{className:t.checkboxLabel,onClick:d=>{(d.ctrlKey||d.metaKey)&&(u?s.removeFromSelection([n]):s.addToSelection([n]),d.preventDefault())},control:l.jsx(rt,{className:t.compactCheckbox,checked:i,onChange:()=>{_(c)},disabled:ri(h),slotProps:{input:{"data-testid":`htsTrackEntry-${o}`}}}),label:l.jsx("div",{"data-testid":`htsTrackLabel-${o}`,className:u?t.selected:void 0,children:l.jsx(Ie,{html:h})})})}),l.jsx(we,{model:s,trackId:c,id:o,conf:n})]})}const li=W()(e=>({accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:e.palette.tertiary.main,color:e.palette.tertiary.contrastText,width:"100%",display:"flex",paddingLeft:5}}));function ci({data:e,isOpen:t,style:i,setOpen:n}){const{isLeaf:s,nestingLevel:a}=e,{classes:o}=li(),c=10,h=a*c+(s?c:0);return l.jsxs("div",{style:i,className:s?void 0:o.accordionBase,children:[new Array(a).fill(0).map((u,_)=>l.jsx("div",{style:{left:_*c+4,height:i==null?void 0:i.height},className:o.nestingLevelMarker},`mark-${_}`)),l.jsx("div",{className:s?void 0:o.accordionCard,style:{marginLeft:h,whiteSpace:"nowrap",width:"100%"},children:l.jsx("div",{className:s?void 0:o.accordionColor,children:s?l.jsx(oi,{data:e}):l.jsx(si,{isOpen:t,data:e,setOpen:n})})})]})}function xe(e,t,i,n){const s=e.type==="track",a=s?n[e.trackId]:!1;return{data:{defaultHeight:s?22:40,isLeaf:s,isOpenByDefault:!0,nestingLevel:t,selected:a,...e,...i},nestingLevel:t,node:e}}const Ce=O(function({height:t,tree:i,model:n}){const{filterText:s,selection:a,view:o}=n,c=T.useRef(null),h=I.getSession(n),{drawerPosition:u}=h,_=T.useMemo(()=>Object.fromEntries(a.map(m=>[m.trackId,m])),[a]),x=T.useMemo(()=>({onChange:m=>{o.toggleTrack(m)&&n.addToRecentlyUsed(m)},toggleCollapse:m=>{n.toggleCategory(m)},tree:i,model:n,drawerPosition:u}),[o,n,u,i]),d=T.useCallback(function*(){for(const p of i.children)yield xe(p,0,x,_);for(;;){const p=yield;for(const r of p.node.children)yield xe(r,p.nestingLevel+1,x,_)}},[i,x,_]);return T.useEffect(()=>{c.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})},[i,s]),l.jsx(l.Fragment,{children:l.jsx(ei,{ref:c,treeWalker:d,height:t,children:ci})})}),di=({tree:e,model:t,offset:i})=>typeof jest>"u"?l.jsx(ct,{disableWidth:!0,children:n=>l.jsx(Ce,{height:(n.height||i)-i,model:t,tree:e})}):l.jsx(Ce,{height:9e3,model:t,tree:e}),ui=({overrideDimensions:e,children:t})=>e?l.jsx("div",{style:{...e},children:t}):t,hi=O(function({model:e,toolbarHeight:t,overrideDimensions:i}){return l.jsxs(ui,{overrideDimensions:i,children:[l.jsx(fi,{model:e,toolbarHeight:t}),l.jsx(ut,{model:e})]})}),fi=O(function({model:e,toolbarHeight:t=0}){const[i,n]=T.useState(0);return l.jsxs(l.Fragment,{children:[l.jsx(Rt,{model:e,setHeaderHeight:n}),l.jsx(di,{tree:e.hierarchy,model:e,offset:t+i})]})});var yi=Object.freeze({__proto__:null,default:hi});export{yi as H,St as S,we as T};
//# sourceMappingURL=HierarchicalTrackSelector-DRsHfZSG.js.map
