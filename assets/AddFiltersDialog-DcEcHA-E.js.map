{"version":3,"file":"AddFiltersDialog-DcEcHA-E.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearBasicDisplay/components/AddFiltersDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { stringToJexlExpression } from '@jbrowse/core/util/jexlStrings';\nimport { Button, DialogActions, DialogContent, TextField } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()({\n    dialogContent: {\n        width: '80em',\n    },\n    textAreaFont: {\n        fontFamily: 'Courier New',\n    },\n    error: {\n        color: 'red',\n        fontSize: '0.8em',\n    },\n});\nfunction checkJexl(code) {\n    stringToJexlExpression(code);\n}\nconst AddFiltersDialog = observer(function ({ model, handleClose, }) {\n    const { classes } = useStyles();\n    const { activeFilters } = model;\n    const [data, setData] = useState(activeFilters.join('\\n'));\n    const [error, setError] = useState();\n    useEffect(() => {\n        try {\n            data\n                .split('\\n')\n                .map(line => line.trim())\n                .filter(line => !!line)\n                .map(line => {\n                checkJexl(line.trim());\n            });\n            setError(undefined);\n        }\n        catch (e) {\n            console.error(e);\n            setError(e);\n        }\n    }, [data]);\n    return (_jsxs(Dialog, { maxWidth: \"xl\", open: true, onClose: handleClose, title: \"Add track filters\", children: [_jsxs(DialogContent, { children: [_jsxs(\"div\", { children: [\"Add filters, in jexl format, one per line, starting with the string jexl:. Examples:\", ' ', _jsxs(\"ul\", { children: [_jsxs(\"li\", { children: [_jsx(\"code\", { children: \"jexl:get(feature,'name')=='BRCA1'\" }), \" - show only feature where the name attribute is BRCA1\"] }), _jsxs(\"li\", { children: [_jsx(\"code\", { children: \"jexl:get(feature,'type')=='gene'\" }), \" - show only gene type features in a GFF that has many other feature types\"] }), _jsxs(\"li\", { children: [_jsx(\"code\", { children: \"jexl:get(feature,'score') > 400\" }), \" - show only features that have a score greater than 400\"] }), _jsxs(\"li\", { children: [_jsx(\"code\", { children: \"jexl:get(feature,'end') - get(feature,'start') < 1000000\" }), ' ', \"- show only features with length less than 1Mbp\"] })] })] }), error ? _jsx(\"p\", { className: classes.error, children: `${error}` }) : null, _jsx(TextField, { variant: \"outlined\", multiline: true, minRows: 5, maxRows: 10, className: classes.dialogContent, fullWidth: true, value: data, onChange: event => {\n                            setData(event.target.value);\n                        }, slotProps: {\n                            input: {\n                                classes: {\n                                    input: classes.textAreaFont,\n                                },\n                            },\n                        } })] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", color: \"primary\", type: \"submit\", autoFocus: true, disabled: !!error, onClick: () => {\n                            model.setJexlFilters(data.split('\\n'));\n                            handleClose();\n                        }, children: \"Submit\" }), _jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                        }, children: \"Cancel\" })] })] }));\n});\nexport default AddFiltersDialog;\n"],"names":["useStyles","makeStyles","checkJexl","code","stringToJexlExpression","AddFiltersDialog","observer","model","handleClose","classes","activeFilters","data","setData","useState","error","setError","useEffect","line","e","_jsxs","Dialog","DialogContent","_jsx","TextField","event","DialogActions","Button"],"mappings":"8IAOA,MAAMA,EAAYC,EAAU,EAAG,CAC3B,cAAe,CACX,MAAO,MACf,EACI,aAAc,CACV,WAAY,aACpB,EACI,MAAO,CACH,MAAO,MACP,SAAU,OAClB,CACA,CAAC,EACD,SAASC,EAAUC,EAAM,CACrBC,EAAAA,uBAAuBD,CAAI,CAC/B,CACK,MAACE,EAAmBC,EAAS,SAAU,CAAE,MAAAC,EAAO,YAAAC,CAAW,EAAK,CACjE,KAAM,CAAE,QAAAC,CAAO,EAAKT,EAAS,EACvB,CAAE,cAAAU,CAAa,EAAKH,EACpB,CAACI,EAAMC,CAAO,EAAIC,EAAAA,SAASH,EAAc,KAAK;AAAA,CAAI,CAAC,EACnD,CAACI,EAAOC,CAAQ,EAAIF,WAAQ,EAClCG,OAAAA,EAAAA,UAAU,IAAM,CACZ,GAAI,CACAL,EACK,MAAM;AAAA,CAAI,EACV,IAAIM,GAAQA,EAAK,KAAI,CAAE,EACvB,OAAOA,GAAQ,CAAC,CAACA,CAAI,EACrB,IAAIA,GAAQ,CACbf,EAAUe,EAAK,MAAM,CACzB,CAAC,EACDF,EAAS,MAAS,CACtB,OACOG,EAAG,CACN,QAAQ,MAAMA,CAAC,EACfH,EAASG,CAAC,CACd,CACJ,EAAG,CAACP,CAAI,CAAC,EACDQ,EAAAA,KAAMC,EAAAA,OAAQ,CAAE,SAAU,KAAM,KAAM,GAAM,QAASZ,EAAa,MAAO,oBAAqB,SAAU,CAACW,EAAAA,KAAME,EAAe,CAAE,SAAU,CAACF,OAAM,MAAO,CAAE,SAAU,CAAC,uFAAwF,IAAKA,EAAAA,KAAM,KAAM,CAAE,SAAU,CAACA,EAAAA,KAAM,KAAM,CAAE,SAAU,CAACG,MAAK,OAAQ,CAAE,SAAU,mCAAmC,CAAE,EAAG,wDAAwD,CAAC,CAAE,EAAGH,EAAAA,KAAM,KAAM,CAAE,SAAU,CAACG,EAAAA,IAAK,OAAQ,CAAE,SAAU,kCAAkC,CAAE,EAAG,4EAA4E,CAAC,CAAE,EAAGH,EAAAA,KAAM,KAAM,CAAE,SAAU,CAACG,EAAAA,IAAK,OAAQ,CAAE,SAAU,kCAAmC,EAAG,0DAA0D,CAAC,CAAE,EAAGH,EAAAA,KAAM,KAAM,CAAE,SAAU,CAACG,EAAAA,IAAK,OAAQ,CAAE,SAAU,0DAA0D,CAAE,EAAG,IAAK,iDAAiD,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,EAAGR,EAAQQ,MAAK,IAAK,CAAE,UAAWb,EAAQ,MAAO,SAAU,GAAGK,CAAK,EAAE,CAAE,EAAI,KAAMQ,EAAAA,IAAKC,EAAW,CAAE,QAAS,WAAY,UAAW,GAAM,QAAS,EAAG,QAAS,GAAI,UAAWd,EAAQ,cAAe,UAAW,GAAM,MAAOE,EAAM,SAAUa,GAAS,CAC7oCZ,EAAQY,EAAM,OAAO,KAAK,CAC9B,EAAG,UAAW,CACV,MAAO,CACH,QAAS,CACL,MAAOf,EAAQ,YACnD,CACA,CACA,EAA2B,CAAC,EAAG,EAAGU,OAAMM,EAAe,CAAE,SAAU,CAACH,EAAAA,IAAKI,EAAQ,CAAE,QAAS,YAAa,MAAO,UAAW,KAAM,SAAU,UAAW,GAAM,SAAU,CAAC,CAACZ,EAAO,QAAS,IAAM,CAClKP,EAAM,eAAeI,EAAK,MAAM;AAAA,CAAI,CAAC,EACrCH,EAAW,CACf,EAAG,SAAU,QAAQ,CAAE,EAAGc,EAAAA,IAAKI,EAAQ,CAAE,QAAS,YAAa,MAAO,YAAa,QAAS,IAAM,CAC9FlB,EAAW,CACf,EAAG,SAAU,QAAQ,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CACvD,CAAC","x_google_ignoreList":[0]}