import{u as f,d as r,i as l}from"./rpcWorker-X0469dqW.js";function a(o,s){if(typeof o=="object"&&o!==null)for(const e of Object.keys(o))typeof o[e]=="object"&&o[e]!==null?a(o[e],s):e==="uri"&&(o.baseUri=s.href)}function u(o,s){return new URL(o,s).href}async function y(o){var s;const e=f.getSession(o);try{const n=r.getConf(o,"configJsonLocation"),t=JSON.parse(await l.openLocation(n).readFile("utf8")),c=u(n.uri,n.baseUri);if(a(t,new URL(c)),t.assemblies)for(const i of t.assemblies)e.assemblyManager.get(i.name)||e.addSessionAssembly(i);t.tracks&&o.addTrackConfs(t.tracks),e.notify("Successfully loaded","success")}catch(n){console.error(n),e.notifyError(`${r.getConf(o,"name")}: "${n}"`,n),(s=e.breakConnection)===null||s===void 0||s.call(e,o.configuration)}}export{y as doConnect};
//# sourceMappingURL=doConnect-BOd3RGyC.js.map
