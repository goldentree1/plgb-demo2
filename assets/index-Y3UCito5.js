import{o as d,r as l,j as e,I as b,K as y,L as F,b as x,c,bi as B,a$ as k,m as D,h as N,ak as C,d as j,bj as E}from"./rpcWorker-X0469dqW.js";import{M}from"./MenuItem-CxTol2m1.js";import{D as O}from"./DataGridFlexContainer-DyRg75p6.js";import{D as U}from"./Delete-DYvCOH6E.js";import{D as H}from"./DataGrid-CDeG2vOy.js";import"./dividerClasses-BkmUKgu8.js";import"./getThemeProps-RNW6Z-3w.js";import"./FormControlLabel-1s92K5sy.js";import"./Divider-DsWTSitt.js";import"./Badge-BKK_x0o6.js";import"./TableCell-BPTDO_V-.js";import"./Checkbox-CZRpP34h.js";const $=d(function({adapterSelection:a,setAdapterSelection:n,adapterTypes:i}){return e.jsx(y,{value:a,variant:"outlined",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:t=>{n(t.target.value)},children:i.map(t=>e.jsx(M,{value:t,children:t},t))})}),G=d(function({fastaLocation:a,setFastaLocation:n}){return e.jsxs(e.Fragment,{children:[e.jsx(B,{severity:"warning",style:{margin:8},children:"Note: a FASTA index will be generated on submit, might take a couple minutes and if the file is remote, it will be downloaded in full"}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA file",location:a,setLocation:n})})]})}),q=d(function({fastaLocation:a,faiLocation:n,setFaiLocation:i,setFastaLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA file",location:a,setLocation:t})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA index (.fai) file",location:n,setLocation:i})})]})}),P=d(function({fastaLocation:a,faiLocation:n,gziLocation:i,setFaiLocation:t,setGziLocation:s,setFastaLocation:r}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA file (.fa.gz)",location:a,setLocation:r})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA index (.fai) file",location:n,setLocation:t})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"FASTA gzip index (.gzi) file",location:i,setLocation:s})})]})}),R=d(function({twoBitLocation:a,chromSizesLocation:n,setTwoBitLocation:i,setChromSizesLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"2bit file",location:a,setLocation:i})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:".chrom.sizes (optional, can speed up loading 2bit files with many contigs)",location:n,setLocation:t})})]})}),u={uri:""},T=["IndexedFastaAdapter","BgzipFastaAdapter","UnindexedFastaAdapter","TwoBitAdapter"],K=d(function({session:a,onClose:n}){const[i,t]=l.useState(""),[s,r]=l.useState(""),[o,p]=l.useState(T[0]),[m,f]=l.useState(u),[h,g]=l.useState(u),[S,I]=l.useState(u),[L,w]=l.useState(u),[v,z]=l.useState(u);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(y,{id:"assembly-name",label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:i,onChange:A=>{t(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-name"}}}),e.jsx(y,{id:"assembly-display-name",label:"Assembly display name",helperText:'(optional) A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:s,onChange:A=>{r(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-display-name"}}}),e.jsx($,{adapterSelection:o,adapterTypes:T,setAdapterSelection:p}),o==="IndexedFastaAdapter"?e.jsx(q,{fastaLocation:m,faiLocation:h,setFaiLocation:g,setFastaLocation:f}):o==="UnindexedFastaAdapter"?e.jsx(G,{fastaLocation:m,setFastaLocation:f}):o==="TwoBitAdapter"?e.jsx(R,{twoBitLocation:L,chromSizesLocation:v,setTwoBitLocation:w,setChromSizesLocation:z}):e.jsx(P,{fastaLocation:m,gziLocation:S,faiLocation:h,setFaiLocation:g,setGziLocation:I,setFastaLocation:f})]}),e.jsxs(F,{children:[e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{i===""?a.notify("Can't create an assembly without a name"):(n(),a.addAssembly({name:i,displayName:s,sequence:{type:"ReferenceSequenceTrack",trackId:`${i}-${performance.now()}`,adapter:o==="IndexedFastaAdapter"?{type:"IndexedFastaAdapter",fastaLocation:m,faiLocation:h}:o==="BgzipFastaAdapter"?{type:"BgzipFastaAdapter",fastaLocation:m,faiLocation:h,gziLocation:S}:o==="UnindexedFastaAdapter"?{type:"UnindexedFastaAdapter",fastaLocation:m}:{type:"TwoBitAdapter",twoBitLocation:L,chromSizesLocation:v}}}),a.notify(`Added "${i}"`,"success"))},children:"Submit"}),e.jsx(x,{variant:"contained",color:"secondary",onClick:()=>{n()},children:"Cancel"})]})]})}),V=D()({container:{overflow:"auto",maxHeight:600}}),W=d(function({assembly:a,onClose:n}){const{classes:i}=V();return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("div",{className:i.container,children:a?e.jsx(k,{model:{target:a}}):e.jsx("div",{children:"No assembly"})})}),e.jsx(F,{children:e.jsx(x,{variant:"contained",onClick:()=>{n()},children:"Back"})})]})});var J=N(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}));const Q=d(function({onEditAssembly:a,onAddAssembly:n,onClose:i,session:t}){return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(O,{children:e.jsx(H,{rowHeight:25,columnHeaderHeight:35,hideFooter:t.assemblies.length<25,rows:t.assemblies.map(s=>({id:j.readConfObject(s,"name"),name:j.readConfObject(s,"name"),displayName:j.readConfObject(s,"displayName"),aliases:j.readConfObject(s,"aliases"),assembly:s})),columns:[{field:"name"},{field:"displayName"},{field:"aliases"},{field:"actions",renderCell:({row:s})=>{const{assembly:r,name:o}=s,p=t.sessionAssemblies.includes(r)?!0:t.adminMode;return e.jsxs(e.Fragment,{children:[e.jsx(C,{disabled:!p,onClick:()=>{a(r)},children:e.jsx(J,{})}),e.jsx(C,{"data-testid":`${o}-delete`,disabled:!p,onClick:()=>{p&&(t.removeAssembly?t.removeAssembly(o):t.notify("Unable to find removeAssembly function"))},children:e.jsx(U,{})})]})}}]})})}),e.jsxs(F,{children:[e.jsx(x,{color:"secondary",variant:"contained",onClick:()=>{i()},children:"Close"}),e.jsx(x,{variant:"contained",startIcon:e.jsx(E,{}),onClick:()=>{n()},children:"Add new assembly"})]})]})}),re=d(function({session:a,onClose:n}){const[i,t]=l.useState(!1),[s,r]=l.useState();return e.jsx(c.Dialog,{open:!0,title:"Assembly manager",onClose:()=>{n()},children:s?e.jsx(W,{assembly:s,onClose:()=>{r(void 0)}}):i?e.jsx(K,{session:a,onClose:()=>{t(!1)}}):e.jsx(Q,{session:a,onClose:()=>{n()},onAddAssembly:()=>{t(!0)},onEditAssembly:o=>{r(o)}})})});export{re as default};
//# sourceMappingURL=index-Y3UCito5.js.map
