import{u as p,r as l,j as e,c as j,I as E,J as y,L as z,b as v,O as F,K as w}from"./rpcWorker-X0469dqW.js";import{M as r}from"./MenuItem-CxTol2m1.js";import{F as N}from"./FormControlLabel-1s92K5sy.js";import{C as O}from"./Checkbox-CZRpP34h.js";import"./dividerClasses-BkmUKgu8.js";function D(){return e.jsxs("div",{children:[e.jsx(F,{size:20,style:{marginRight:20}}),e.jsx(y,{display:"inline",children:"Creating SVG"})]})}function o(a,t){return p.useLocalStorage(`svg-${a}`,t)}function i({children:a,...t}){return e.jsx("div",{children:e.jsx(w,{...t,children:a})})}function A({model:a,handleClose:t}){const n=p.getSession(a),c=typeof OffscreenCanvas<"u",[u,b]=l.useState(c),[C,d]=l.useState(!1),[h,x]=l.useState(),[f,S]=o("file","jbrowse.svg"),[m,L]=o("tracklabels","offset"),[g,T]=o("theme",n.themeName||"default");return e.jsxs(j.Dialog,{open:!0,onClose:t,title:"Export SVG",children:[e.jsxs(E,{children:[h?e.jsx(j.ErrorMessage,{error:h}):C?e.jsx(D,{}):null,e.jsx(i,{helperText:"filename",value:f,onChange:s=>{S(s.target.value)}}),e.jsxs(i,{select:!0,label:"Track label positioning",variant:"outlined",style:{width:150},value:m,onChange:s=>{L(s.target.value)},children:[e.jsx(r,{value:"offset",children:"Offset"}),e.jsx(r,{value:"overlay",children:"Overlay"}),e.jsx(r,{value:"left",children:"Left"}),e.jsx(r,{value:"none",children:"None"})]}),n.allThemes?e.jsx(i,{select:!0,label:"Theme",variant:"outlined",value:g,onChange:s=>{T(s.target.value)},children:Object.entries(n.allThemes()).map(([s,k])=>e.jsx(r,{value:s,children:k.name||"(Unknown name)"},s))}):null,c?e.jsx(N,{control:e.jsx(O,{checked:u,onChange:()=>{b(s=>!s)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):e.jsx(y,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),e.jsxs(z,{children:[e.jsx(v,{variant:"contained",color:"secondary",onClick:()=>{t()},children:"Cancel"}),e.jsx(v,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{d(!0),x(void 0);try{await a.exportSvg({rasterizeLayers:u,filename:f,trackLabels:m,themeName:g}),t()}catch(s){console.error(s),x(s)}finally{d(!1)}},children:"Submit"})]})]})}export{A as default};
//# sourceMappingURL=ExportSvgDialog-B-CNiDSI.js.map
