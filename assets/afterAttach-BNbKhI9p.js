import{t as g,u as o,k as c}from"./index-DUxFddIG.js";async function d(t){const e=g.getRpcSessionId(t),{rpcManager:r}=o.getSession(t),n=o.getContainingView(t);if(!n.initialized||t.error||!t.statsReadyAndRegionNotTooLarge)return;t.setLoading(!0);const a=await r.call(e,"PileupGetReducedFeatures",{sessionId:e,regions:n.staticBlocks.contentBlocks,filterBy:t.filterBy,adapterConfig:t.adapterConfig});t.setChainData(a),t.setLoading(!1)}function h(t,e){c(t,async()=>{await d(t)},{delay:1e3});function r(n){const a=t.ref;if(!a)return;const i=a.getContext("2d");if(!i||!t.chainData)return;const s="layoutHeight"in t?t.layoutHeight||1:t.height;i.resetTransform(),i.clearRect(0,0,a.width,a.height),i.scale(2,2),e(t,i,a.width,s),t.setLastDrawnOffsetPx(n.offsetPx),t.setLastDrawnBpPerPx(n.bpPerPx)}c(t,async()=>{const n=o.getContainingView(t);n.bpPerPx!==t.lastDrawnBpPerPx&&r(n)}),c(t,async()=>{const n=o.getContainingView(t);r(n)},{delay:1e3})}export{h as doAfterAttach};
//# sourceMappingURL=afterAttach-BNbKhI9p.js.map
