import{U as g,u as o,a3 as c}from"./rpcWorker-X0469dqW.js";async function d(t){const e=g.getRpcSessionId(t),{rpcManager:r}=o.getSession(t),a=o.getContainingView(t);if(!a.initialized||t.error||!t.statsReadyAndRegionNotTooLarge)return;t.setLoading(!0);const n=await r.call(e,"PileupGetReducedFeatures",{sessionId:e,regions:a.staticBlocks.contentBlocks,filterBy:t.filterBy,adapterConfig:t.adapterConfig});t.setChainData(n),t.setLoading(!1)}function h(t,e){c(t,async()=>{await d(t)},{delay:1e3});function r(a){const n=t.ref;if(!n)return;const i=n.getContext("2d");if(!i||!t.chainData)return;const s="layoutHeight"in t?t.layoutHeight||1:t.height;i.resetTransform(),i.clearRect(0,0,n.width,n.height),i.scale(2,2),e(t,i,n.width,s),t.setLastDrawnOffsetPx(a.offsetPx),t.setLastDrawnBpPerPx(a.bpPerPx)}c(t,async()=>{const a=o.getContainingView(t);a.bpPerPx!==t.lastDrawnBpPerPx&&r(a)}),c(t,async()=>{const a=o.getContainingView(t);r(a)},{delay:1e3})}export{h as doAfterAttach};
//# sourceMappingURL=afterAttach-BKqSBWUt.js.map
