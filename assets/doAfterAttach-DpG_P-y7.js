import{a3 as n,u as i,a4 as c,U as x,a5 as C}from"./rpcWorker-X0469dqW.js";function w(t){n(t,async()=>{const r=i.getContainingView(t);t.autorunReady&&t.setCurrSortBpPerPx(r.bpPerPx)},{delay:1e3}),n(t,async()=>{const{rpcManager:r}=i.getSession(t),a=i.getContainingView(t);if(!t.autorunReady)return;const{sortedBy:s,adapterConfig:e,rendererType:p,sortReady:f}=t,{bpPerPx:y}=a;if(s&&(!f||t.currSortBpPerPx===a.bpPerPx)){const{pos:o,refName:g,assemblyName:u}=s;await t.rendererType.renderInClient(r,{assemblyName:u,regions:[{start:o,end:o+1,refName:g,assemblyName:u}],adapterConfig:e,rendererType:p.name,sessionId:x.getRpcSessionId(t),layoutId:i.getContainingTrack(t).id,timeout:1e6,statusCallback:P=>{c(t)&&t.setMessage(P)},...t.renderPropsPre()})}c(t)&&(t.setCurrSortBpPerPx(y),t.setSortReady(!0))},{delay:1e3}),n(t,async()=>{if(!t.autorunReady)return;const{adapterConfig:r}=t,{staticBlocks:a}=i.getContainingView(t),{modifications:s,simplexModifications:e}=await C({model:t,adapterConfig:r,blocks:a});c(t)&&(t.updateVisibleModifications(s),t.setSimplexModifications(e),t.setModificationsReady(!0))},{delay:1e3})}export{w as doAfterAttach};
//# sourceMappingURL=doAfterAttach-DpG_P-y7.js.map
