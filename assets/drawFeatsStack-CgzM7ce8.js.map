{"version":3,"file":"drawFeatsStack-CgzM7ce8.js","sources":["../node_modules/@jbrowse/plugin-alignments/esm/LinearReadCloudDisplay/drawFeatsStack.js"],"sourcesContent":["import GranularRectLayout from '@jbrowse/core/util/layouts/GranularRectLayout';\nimport { drawFeatsCommon } from './drawFeatsCommon';\nfunction calculateStackYOffsets(computedChains, self, _view, featureHeight) {\n    var _a, _b;\n    const noSpacing = (_a = self.noSpacing) !== null && _a !== void 0 ? _a : false;\n    const maxHeight = (_b = self.trackMaxHeight) !== null && _b !== void 0 ? _b : 1200;\n    const layout = new GranularRectLayout({\n        pitchX: 1,\n        pitchY: 1,\n        maxHeight,\n    });\n    const layoutPadding = noSpacing ? 0 : 1;\n    for (const { id, minX, maxX, chain } of computedChains) {\n        layout.addRect(id, minX, maxX, featureHeight + layoutPadding, {\n            feat: chain[0],\n            fill: 'transparent',\n            stroke: 'transparent',\n            distance: maxX - minX,\n        });\n    }\n    const chainYOffsets = new Map();\n    for (const [id, rect] of layout.getRectangles()) {\n        const top = rect[1];\n        chainYOffsets.set(id, top);\n    }\n    return { chainYOffsets, layoutHeight: layout.getTotalHeight() };\n}\nexport function drawFeats(self, ctx) {\n    drawFeatsCommon(self, ctx, calculateStackYOffsets);\n}\n"],"names":["calculateStackYOffsets","computedChains","self","_view","featureHeight","_a","_b","noSpacing","maxHeight","layout","GranularRectLayout","layoutPadding","id","minX","maxX","chain","chainYOffsets","rect","top","drawFeats","ctx","drawFeatsCommon"],"mappings":"mJAEA,SAASA,EAAuBC,EAAgBC,EAAMC,EAAOC,EAAe,CACxE,IAAIC,EAAIC,EACR,MAAMC,GAAaF,EAAKH,EAAK,aAAe,MAAQG,IAAO,OAASA,EAAK,GACnEG,GAAaF,EAAKJ,EAAK,kBAAoB,MAAQI,IAAO,OAASA,EAAK,KACxEG,EAAS,IAAIC,EAAmB,CAClC,OAAQ,EACR,OAAQ,EACR,UAAAF,CACR,CAAK,EACKG,EAAgBJ,EAAY,EAAI,EACtC,SAAW,CAAE,GAAAK,EAAI,KAAAC,EAAM,KAAAC,EAAM,MAAAC,CAAK,IAAMd,EACpCQ,EAAO,QAAQG,EAAIC,EAAMC,EAAMV,EAAgBO,EAAe,CAC1D,KAAMI,EAAM,CAAC,EACb,KAAM,cACN,OAAQ,cACR,SAAUD,EAAOD,CAC7B,CAAS,EAEL,MAAMG,EAAgB,IAAI,IAC1B,SAAW,CAACJ,EAAIK,CAAI,IAAKR,EAAO,cAAa,EAAI,CAC7C,MAAMS,EAAMD,EAAK,CAAC,EAClBD,EAAc,IAAIJ,EAAIM,CAAG,CAC7B,CACA,MAAO,CAAE,cAAAF,EAAe,aAAcP,EAAO,eAAc,CAAE,CACjE,CACO,SAASU,EAAUjB,EAAMkB,EAAK,CACjCC,EAAgBnB,EAAMkB,EAAKpB,CAAsB,CACrD","x_google_ignoreList":[0]}