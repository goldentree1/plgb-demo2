import{u as f,s as i,a4 as l}from"./index-DUxFddIG.js";function r(o,e){if(typeof o=="object"&&o!==null)for(const s of Object.keys(o))typeof o[s]=="object"&&o[s]!==null?r(o[s],e):s==="uri"&&(o.baseUri=e.href)}function u(o,e){return new URL(o,e).href}async function y(o){var e;const s=f.getSession(o);try{const n=i.getConf(o,"configJsonLocation"),t=JSON.parse(await l.openLocation(n).readFile("utf8")),c=u(n.uri,n.baseUri);if(r(t,new URL(c)),t.assemblies)for(const a of t.assemblies)s.assemblyManager.get(a.name)||s.addSessionAssembly(a);t.tracks&&o.addTrackConfs(t.tracks),s.notify("Successfully loaded","success")}catch(n){console.error(n),s.notifyError(`${i.getConf(o,"name")}: "${n}"`,n),(e=s.breakConnection)===null||e===void 0||e.call(s,o.configuration)}}export{y as doConnect};
//# sourceMappingURL=doConnect-ClzkJRb_.js.map
