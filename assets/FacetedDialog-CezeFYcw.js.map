{"version":3,"file":"FacetedDialog-CezeFYcw.js","sources":["../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilter.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilters.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedDataGrid.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedHeader.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedSelector.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { coarseStripHTML } from '@jbrowse/core/util';\nimport AddIcon from '@mui/icons-material/Add';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MinimizeIcon from '@mui/icons-material/Minimize';\nimport { FormControl, IconButton, Select, Tooltip, Typography, } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    facet: {\n        margin: 0,\n        marginLeft: theme.spacing(2),\n    },\n    select: {\n        marginBottom: theme.spacing(2),\n    },\n}));\nfunction ClearButton({ onClick }) {\n    return (_jsx(Tooltip, { title: \"Clear selection on this facet filter\", children: _jsx(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\", children: _jsx(ClearIcon, {}) }) }));\n}\nfunction ExpandButton({ visible, onClick, }) {\n    return (_jsx(Tooltip, { title: \"Minimize/expand this facet filter\", children: _jsx(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\", children: visible ? _jsx(MinimizeIcon, {}) : _jsx(AddIcon, {}) }) }));\n}\nconst FacetFilter = observer(function ({ column, vals, model, }) {\n    const { classes } = useStyles();\n    const [visible, setVisible] = useState(true);\n    const { faceted } = model;\n    const { filters } = faceted;\n    const { field } = column;\n    return (_jsxs(FormControl, { className: classes.facet, fullWidth: true, children: [_jsxs(\"div\", { children: [_jsx(Typography, { component: \"span\", children: field }), _jsx(ClearButton, { onClick: () => {\n                            faceted.setFilter(field, []);\n                        } }), _jsx(ExpandButton, { visible: visible, onClick: () => {\n                            setVisible(!visible);\n                        } })] }), visible ? (_jsx(Select, { multiple: true, native: true, className: classes.select, value: filters.get(column.field) || [], onChange: event => {\n                    faceted.setFilter(column.field, [...event.target.options]\n                        .filter(opt => opt.selected)\n                        .map(opt => opt.value));\n                }, children: vals\n                    .sort((a, b) => a[0].localeCompare(b[0]))\n                    .map(([name, count]) => (_jsxs(\"option\", { value: name, children: [coarseStripHTML(name), \" (\", count, \")\"] }, name))) })) : null] }));\n});\nexport default FacetFilter;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { observer } from 'mobx-react';\nimport FacetFilter from './FacetFilter';\nimport { getRowStr } from './util';\nconst FacetFilters = observer(function ({ rows, columns, model, }) {\n    var _a, _b;\n    const { faceted } = model;\n    const { filters } = faceted;\n    const facets = columns.slice(1);\n    const facetFieldToCategoryCountMap = new Map(columns.slice(1).map(f => [f.field, new Map()]));\n    const filterKeys = faceted.filters.keys();\n    const facetKeys = facets.map(f => f.field);\n    const facetKeysPrioritizingUserSelections = new Set();\n    for (const entry of filterKeys) {\n        if ((_a = filters.get(entry)) === null || _a === void 0 ? void 0 : _a.length) {\n            facetKeysPrioritizingUserSelections.add(entry);\n        }\n    }\n    for (const entry of facetKeys) {\n        facetKeysPrioritizingUserSelections.add(entry);\n    }\n    let currentRows = rows;\n    for (const facetKey of facetKeysPrioritizingUserSelections) {\n        const categoryCountMap = facetFieldToCategoryCountMap.get(facetKey);\n        if (categoryCountMap) {\n            for (const row of currentRows) {\n                const key = getRowStr(facetKey, row);\n                const currentCount = categoryCountMap.get(key);\n                if (key) {\n                    if (currentCount === undefined) {\n                        categoryCountMap.set(key, 1);\n                    }\n                    else {\n                        categoryCountMap.set(key, currentCount + 1);\n                    }\n                }\n            }\n        }\n        const filter = ((_b = filters.get(facetKey)) === null || _b === void 0 ? void 0 : _b.length)\n            ? new Set(filters.get(facetKey))\n            : undefined;\n        currentRows = currentRows.filter(row => filter !== undefined ? filter.has(getRowStr(facetKey, row)) : true);\n    }\n    return (_jsx(\"div\", { children: facets.map(c => (_jsx(FacetFilter, { vals: [...facetFieldToCategoryCountMap.get(c.field)], column: c, model: model }, c.field))) }));\n});\nexport default FacetFilters;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { getEnv, measureGridWidth } from '@jbrowse/core/util';\nimport { DataGrid } from '@mui/x-data-grid';\nimport { transaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { getRoot, resolveIdentifier } from 'mobx-state-tree';\nconst FacetedDataGrid = observer(function ({ model, columns, shownTrackIds, selection, }) {\n    const { pluginManager } = getEnv(model);\n    const { view, faceted } = model;\n    const { rows, useShoppingCart, showOptions, filteredRows, filteredNonMetadataKeys, filteredMetadataKeys, visible, } = faceted;\n    const [widths, setWidths] = useState({\n        name: measureGridWidth(rows.map(r => r.name), {\n            maxWidth: 500,\n            stripHTML: true,\n        }) + 15,\n        ...Object.fromEntries(filteredNonMetadataKeys\n            .filter(f => visible[f])\n            .map(e => [\n            e,\n            measureGridWidth(rows.map(r => r[e]), {\n                maxWidth: 400,\n                stripHTML: true,\n            }),\n        ])),\n        ...Object.fromEntries(filteredMetadataKeys\n            .filter(f => visible[`metadata.${f}`])\n            .map(e => {\n            return [\n                `metadata.${e}`,\n                measureGridWidth(rows.map(r => r.metadata[e]), {\n                    maxWidth: 400,\n                    stripHTML: true,\n                }),\n            ];\n        })),\n    });\n    return (_jsx(DataGrid, { rowHeight: 25, columnHeaderHeight: 35, checkboxSelection: true, disableRowSelectionOnClick: true, keepNonExistentRowsSelected: true, rows: filteredRows, columnVisibilityModel: visible, showToolbar: showOptions, onColumnWidthChange: arg => {\n            setWidths({\n                ...widths,\n                [arg.colDef.field]: arg.width,\n            });\n        }, onColumnVisibilityModelChange: n => {\n            model.faceted.setVisible(n);\n        }, onRowSelectionModelChange: userSelectedIds => {\n            if (!useShoppingCart) {\n                const a1 = shownTrackIds;\n                const a2 = userSelectedIds.ids;\n                transaction(() => {\n                    ;\n                    [...a1].filter(x => !a2.has(x)).map(t => view.hideTrack(t));\n                    [...a2]\n                        .filter(x => !a1.has(x))\n                        .map(t => {\n                        view.showTrack(t);\n                        model.addToRecentlyUsed(t);\n                    });\n                });\n            }\n            else {\n                const root = getRoot(model);\n                const schema = pluginManager.pluggableConfigSchemaType('track');\n                model.setSelection([...userSelectedIds.ids].map(id => resolveIdentifier(schema, root, id)));\n            }\n        }, rowSelectionModel: {\n            type: 'include',\n            ids: new Set(useShoppingCart ? selection.map(s => s.trackId) : [...shownTrackIds]),\n        }, columns: columns.map(r => ({\n            ...r,\n            width: widths[r.field],\n        })) }));\n});\nexport default FacetedDataGrid;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Menu } from '@jbrowse/core/ui';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MoreVert from '@mui/icons-material/MoreVert';\nimport { Grid, IconButton, InputAdornment, TextField } from '@mui/material';\nimport ShoppingCart from '../ShoppingCart';\nexport default function FacetedHeader({ model, }) {\n    const { faceted } = model;\n    const [anchorEl, setAnchorEl] = useState(null);\n    const { showOptions, showFilters, showSparse, useShoppingCart } = faceted;\n    return (_jsxs(_Fragment, { children: [_jsxs(Grid, { container: true, spacing: 4, alignItems: \"center\", children: [_jsx(TextField, { label: \"Search...\", value: faceted.filterText, onChange: event => {\n                            faceted.setFilterText(event.target.value);\n                        }, slotProps: {\n                            input: {\n                                endAdornment: (_jsx(InputAdornment, { position: \"end\", children: _jsx(IconButton, { onClick: () => {\n                                            faceted.setFilterText('');\n                                        }, children: _jsx(ClearIcon, {}) }) })),\n                            },\n                        } }), _jsx(IconButton, { onClick: event => {\n                            setAnchorEl(event.currentTarget);\n                        }, children: _jsx(MoreVert, {}) }), _jsx(ShoppingCart, { model: model })] }), _jsx(Menu, { anchorEl: anchorEl, open: !!anchorEl, onClose: () => {\n                    setAnchorEl(null);\n                }, onMenuItemClick: (_event, callback) => {\n                    callback();\n                    setAnchorEl(null);\n                }, menuItems: [\n                    {\n                        label: 'Add tracks to selection instead of turning them on/off',\n                        onClick: () => {\n                            faceted.setUseShoppingCart(!useShoppingCart);\n                        },\n                        type: 'checkbox',\n                        checked: useShoppingCart,\n                    },\n                    {\n                        label: 'Show sparse metadata columns',\n                        onClick: () => {\n                            faceted.setShowSparse(!showSparse);\n                        },\n                        checked: showSparse,\n                        type: 'checkbox',\n                    },\n                    {\n                        label: 'Show facet filters',\n                        onClick: () => {\n                            faceted.setShowFilters(!showFilters);\n                        },\n                        checked: showFilters,\n                        type: 'checkbox',\n                    },\n                    {\n                        label: 'Show extra table options',\n                        onClick: () => {\n                            faceted.setShowOptions(!showOptions);\n                        },\n                        checked: showOptions,\n                        type: 'checkbox',\n                    },\n                ] })] }));\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { ResizeHandle } from '@jbrowse/core/ui';\nimport SanitizedHTML from '@jbrowse/core/ui/SanitizedHTML';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport FacetFilters from './FacetFilters';\nimport FacetedDataGrid from './FacetedDataGrid';\nimport FacetedHeader from './FacetedHeader';\nimport TrackLabelMenu from '../tree/TrackLabelMenu';\nconst useStyles = makeStyles()({\n    cell: {\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    resizeHandle: {\n        marginLeft: 5,\n        background: 'grey',\n        width: 5,\n    },\n});\nconst frac = 0.75;\nconst FacetedSelector = observer(function FacetedSelector({ model, }) {\n    const { classes } = useStyles();\n    const { selection, shownTrackIds, faceted } = model;\n    const { rows, panelWidth, showFilters, filteredNonMetadataKeys, filteredMetadataKeys, } = faceted;\n    const columns = [\n        {\n            field: 'name',\n            hideable: false,\n            renderCell: params => {\n                const { value, row } = params;\n                const { id, conf } = row;\n                return (_jsxs(\"div\", { className: classes.cell, children: [_jsx(SanitizedHTML, { html: value }), _jsx(TrackLabelMenu, { id: id, conf: conf, trackId: id, model: model })] }));\n            },\n        },\n        ...filteredNonMetadataKeys.map(e => {\n            return {\n                field: e,\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (_jsx(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n        ...filteredMetadataKeys.map(e => {\n            return {\n                field: `metadata.${e}`,\n                headerName: ['name', ...filteredNonMetadataKeys].includes(e)\n                    ? `${e} (from metadata)`\n                    : e,\n                valueGetter: (_, row) => { var _a; return `${(_a = row.metadata[e]) !== null && _a !== void 0 ? _a : ''}`; },\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (_jsx(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n    ];\n    return (_jsxs(_Fragment, { children: [_jsx(FacetedHeader, { model: model }), _jsxs(\"div\", { style: {\n                    display: 'flex',\n                    overflow: 'hidden',\n                    height: window.innerHeight * frac,\n                    width: window.innerWidth * frac,\n                }, children: [_jsx(\"div\", { style: {\n                            height: window.innerHeight * frac,\n                            width: window.innerWidth * frac - (showFilters ? panelWidth : 0),\n                        }, children: _jsx(FacetedDataGrid, { model: model, columns: columns, shownTrackIds: shownTrackIds, selection: selection }) }), showFilters ? (_jsxs(_Fragment, { children: [_jsx(ResizeHandle, { vertical: true, onDrag: dist => faceted.setPanelWidth(panelWidth - dist), className: classes.resizeHandle }), _jsx(\"div\", { style: { width: panelWidth, overflow: 'auto' }, children: _jsx(FacetFilters, { model: model, rows: rows, columns: columns }) })] })) : null] })] }));\n});\nexport default FacetedSelector;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Dialog } from '@jbrowse/core/ui';\nimport { DialogContent } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport FacetedSelector from './FacetedSelector';\nconst FacetedTrackSelectorDialog = observer(function (props) {\n    const { handleClose } = props;\n    return (_jsx(Dialog, { open: true, onClose: handleClose, maxWidth: \"xl\", title: \"Faceted track selector\", children: _jsx(DialogContent, { children: _jsx(FacetedSelector, { ...props }) }) }));\n});\nexport default FacetedTrackSelectorDialog;\n"],"names":["useStyles","makeStyles","theme","ClearButton","onClick","_jsx","Tooltip","IconButton","ClearIcon","ExpandButton","visible","MinimizeIcon","AddIcon","FacetFilter","observer","column","vals","model","classes","setVisible","useState","faceted","filters","field","_jsxs","FormControl","Typography","Select","event","opt","a","b","name","count","coarseStripHTML","FacetFilters","rows","columns","_a","_b","facets","facetFieldToCategoryCountMap","f","filterKeys","facetKeys","facetKeysPrioritizingUserSelections","entry","currentRows","facetKey","categoryCountMap","row","key","getRowStr","currentCount","filter","c","FacetedDataGrid","shownTrackIds","selection","pluginManager","getEnv","view","useShoppingCart","showOptions","filteredRows","filteredNonMetadataKeys","filteredMetadataKeys","widths","setWidths","measureGridWidth","r","e","DataGrid","arg","n","userSelectedIds","root","getRoot","schema","id","resolveIdentifier","a1","a2","transaction","x","t","s","FacetedHeader","anchorEl","setAnchorEl","showFilters","showSparse","_Fragment","Grid","TextField","InputAdornment","MoreVert","ShoppingCart","Menu","_event","callback","frac","FacetedSelector","panelWidth","params","value","conf","SanitizedHTML","TrackLabelMenu","val","_","ResizeHandle","dist","FacetedTrackSelectorDialog","props","handleClose","Dialog","DialogContent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}