const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FacetedDialog-CezeFYcw.js","./index-DUxFddIG.js","./index-NjQ7mo-o.css","./SanitizedHTML-CHX2ISLM.js","./Clear-DBtchL2x.js","./DataGrid-C-pLz9P0.js","./getThemeProps-Dm0Ny9BI.js","./FormControlLabel-ClCs1Dm_.js","./MenuItem-BgPyIMvW.js","./dividerClasses-Dak6ZOU3.js","./Divider-j7V_EdKn.js","./Badge-BJe6riUv.js","./TableCell-KTWXPZ0I.js","./Checkbox-B2cvj8Wt.js","./Grid-CJVm9s4-.js","./CloseConnectionDialog-Cd8GxRRm.js","./DialogContentText-DV6iUeKW.js","./ListItem-gtntj7FF.js","./DeleteConnectionDialog-D9THhuOS.js","./ManageConnectionsDialog-CAttRRVP.js","./ToggleConnectionsDialog-DNMTveXr.js"])))=>i.map(i=>d[i]);
import{z as Ne,A as He,a as C,E as $e,j as l,G as de,aS as Q,H as Pe,I as Be,b1 as Ue,aM as qe,J as V,aT as Ve,o as O,u as I,br as Ke,cw as Ge,m as R,cx as B,cy as Je,s as ke,_ as P,W as L,t as Xe,a6 as ie,d as Ze,bP as Qe,a7 as Ye,cz as re,cA as W,cB as ne,cC as Ie,cD as et,T as tt,c as it}from"./index-DUxFddIG.js";import{M as ue}from"./MenuItem-BgPyIMvW.js";import{C as rt}from"./Clear-DBtchL2x.js";import{B as se}from"./Badge-BJe6riUv.js";import{S as ze}from"./SanitizedHTML-CHX2ISLM.js";import{F as nt}from"./FormControlLabel-ClCs1Dm_.js";import{C as st}from"./Checkbox-B2cvj8Wt.js";function at(e){return Ne("MuiFab",e)}const he=He("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),ot=e=>{const{color:t,variant:i,classes:n,size:s}=e,a={root:["root",i,`size${Q(s)}`,t==="inherit"?"colorInherit":t]},o=Pe(a,at,n);return{...n,...o}},lt=Be(Ue,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>qe(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${Q(i.size)}`],i.color==="inherit"&&t.colorInherit,t[Q(i.size)],t[i.color]]}})(V(({theme:e})=>{var t,i;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(i=(t=e.palette).getContrastText)==null?void 0:i.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${he.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),V(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Ve(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),V(({theme:e})=>({[`&.${he.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),ct=C.forwardRef(function(t,i){const n=$e({props:t,name:"MuiFab"}),{children:s,className:a,color:o="default",component:c="button",disabled:h=!1,disableFocusRipple:u=!1,focusVisibleClassName:b,size:x="large",variant:d="circular",...m}=n,p={...n,color:o,component:c,disabled:h,disableFocusRipple:u,size:x,variant:d},r=ot(p);return l.jsx(lt,{className:de(r.root,a),component:c,disabled:h,focusRipple:!u,focusVisibleClassName:de(r.focusVisible,b),ownerState:p,ref:i,...m,classes:r,children:s})});let w;typeof window<"u"?w=window:typeof self<"u"?w=self:w=global;let Y=null,ee=null;const fe=20,K=w.clearTimeout,ge=w.setTimeout,G=w.cancelAnimationFrame||w.mozCancelAnimationFrame||w.webkitCancelAnimationFrame,pe=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame;G==null||pe==null?(Y=K,ee=function(t){return ge(t,fe)}):(Y=function([t,i]){G(t),K(i)},ee=function(t){const i=pe(function(){K(n),t()}),n=ge(function(){G(i),t()},fe);return[i,n]});function dt(e){let t,i,n,s,a,o,c;const h=typeof document<"u"&&document.attachEvent;if(!h){o=function(g){const _=g.__resizeTriggers__,v=_.firstElementChild,y=_.lastElementChild,S=v.firstElementChild;y.scrollLeft=y.scrollWidth,y.scrollTop=y.scrollHeight,S.style.width=v.offsetWidth+1+"px",S.style.height=v.offsetHeight+1+"px",v.scrollLeft=v.scrollWidth,v.scrollTop=v.scrollHeight},a=function(g){return g.offsetWidth!==g.__resizeLast__.width||g.offsetHeight!==g.__resizeLast__.height},c=function(g){if(g.target.className&&typeof g.target.className.indexOf=="function"&&g.target.className.indexOf("contract-trigger")<0&&g.target.className.indexOf("expand-trigger")<0)return;const _=this;o(this),this.__resizeRAF__&&Y(this.__resizeRAF__),this.__resizeRAF__=ee(function(){a(_)&&(_.__resizeLast__.width=_.offsetWidth,_.__resizeLast__.height=_.offsetHeight,_.__resizeListeners__.forEach(function(S){S.call(_,g)}))})};let d=!1,m="";n="animationstart";const p="Webkit Moz O ms".split(" ");let r="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="";{const g=document.createElement("fakeelement");if(g.style.animationName!==void 0&&(d=!0),d===!1){for(let _=0;_<p.length;_++)if(g.style[p[_]+"AnimationName"]!==void 0){f=p[_],m="-"+f.toLowerCase()+"-",n=r[_],d=!0;break}}}i="resizeanim",t="@"+m+"keyframes "+i+" { from { opacity: 0; } to { opacity: 0; } } ",s=m+"animation: 1ms "+i+"; "}const u=function(d){if(!d.getElementById("detectElementResize")){const m=(t||"")+".resize-triggers { "+(s||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',p=d.head||d.getElementsByTagName("head")[0],r=d.createElement("style");r.id="detectElementResize",r.type="text/css",e!=null&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=m:r.appendChild(d.createTextNode(m)),p.appendChild(r)}};return{addResizeListener:function(d,m){if(h)d.attachEvent("onresize",m);else{if(!d.__resizeTriggers__){const p=d.ownerDocument,r=w.getComputedStyle(d);r&&r.position==="static"&&(d.style.position="relative"),u(p),d.__resizeLast__={},d.__resizeListeners__=[],(d.__resizeTriggers__=p.createElement("div")).className="resize-triggers";const f=p.createElement("div");f.className="expand-trigger",f.appendChild(p.createElement("div"));const g=p.createElement("div");g.className="contract-trigger",d.__resizeTriggers__.appendChild(f),d.__resizeTriggers__.appendChild(g),d.appendChild(d.__resizeTriggers__),o(d),d.addEventListener("scroll",c,!0),n&&(d.__resizeTriggers__.__animationListener__=function(v){v.animationName===i&&o(d)},d.__resizeTriggers__.addEventListener(n,d.__resizeTriggers__.__animationListener__))}d.__resizeListeners__.push(m)}},removeResizeListener:function(d,m){if(h)d.detachEvent("onresize",m);else if(d.__resizeListeners__.splice(d.__resizeListeners__.indexOf(m),1),!d.__resizeListeners__.length){d.removeEventListener("scroll",c,!0),d.__resizeTriggers__.__animationListener__&&(d.__resizeTriggers__.removeEventListener(n,d.__resizeTriggers__.__animationListener__),d.__resizeTriggers__.__animationListener__=null);try{d.__resizeTriggers__=!d.removeChild(d.__resizeTriggers__)}catch{}}}}}class ut extends C.Component{constructor(...t){super(...t),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:i,disableWidth:n,onResize:s}=this.props;if(this._parentNode){const a=window.getComputedStyle(this._parentNode)||{},o=parseFloat(a.paddingLeft||"0"),c=parseFloat(a.paddingRight||"0"),h=parseFloat(a.paddingTop||"0"),u=parseFloat(a.paddingBottom||"0"),b=this._parentNode.getBoundingClientRect(),x=b.height-h-u,d=b.width-o-c;if(!i&&this.state.height!==x||!n&&this.state.width!==d){this.setState({height:x,width:d});const m=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof s=="function"&&s({height:x,width:d,get scaledHeight(){return m(),x},get scaledWidth(){return m(),d}})}}},this._setRef=i=>{this._autoSizer=i}}componentDidMount(){const{nonce:t}=this.props,i=this._autoSizer?this._autoSizer.parentNode:null;if(i!=null&&i.ownerDocument&&i.ownerDocument.defaultView&&i instanceof i.ownerDocument.defaultView.HTMLElement){this._parentNode=i;const n=i.ownerDocument.defaultView.ResizeObserver;n!=null?(this._resizeObserver=new n(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(i)):(this._detectElementResize=dt(t),this._detectElementResize.addResizeListener(i,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:t,defaultHeight:i,defaultWidth:n,disableHeight:s=!1,disableWidth:a=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:c,onResize:h,style:u={},tagName:b="div",...x}=this.props,{height:d,width:m}=this.state,p={overflow:"visible"},r={};let f=!1;return s||(d===0&&(f=!0),p.height=0,r.height=d,r.scaledHeight=d),a||(m===0&&(f=!0),p.width=0,r.width=m,r.scaledWidth=m),o&&(f=!1),C.createElement(b,{ref:this._setRef,style:{...p,...u},...x},!f&&t(r))}}const ht=R()(e=>({fab:{position:"absolute",bottom:e.spacing(6),right:e.spacing(6)}})),ft=O(function({model:e}){const{classes:t}=ht(),i=I.getSession(e),[n,s]=C.useState(null);function a(){s(null)}const o=I.isSessionModelWithConnections(i),c=I.isSessionWithAddTracks(i);return c||o?l.jsxs(l.Fragment,{children:[l.jsx(ct,{color:"secondary",className:t.fab,onClick:h=>{s(h.currentTarget)},children:l.jsx(Ke,{})}),l.jsxs(Ge,{anchorEl:n,open:!!n,onClose:()=>{s(null)},children:[o?l.jsx(ue,{onClick:()=>{a(),I.isSessionModelWithWidgets(i)&&i.showWidget(i.addWidget("AddConnectionWidget","addConnectionWidget"))},children:"Add connection"}):null,c?l.jsx(ue,{onClick:()=>{a(),I.isSessionModelWithWidgets(i)&&i.showWidget(i.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))},children:"Add track"}):null]})]}):null}),gt=C.lazy(()=>P(()=>import("./FacetedDialog-CezeFYcw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),pt=C.lazy(()=>P(()=>import("./CloseConnectionDialog-Cd8GxRRm.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)),mt=C.lazy(()=>P(()=>import("./DeleteConnectionDialog-D9THhuOS.js"),__vite__mapDeps([18,1,2,16]),import.meta.url)),vt=C.lazy(()=>P(()=>import("./ManageConnectionsDialog-CAttRRVP.js"),__vite__mapDeps([19,1,2]),import.meta.url)),_t=C.lazy(()=>P(()=>import("./ToggleConnectionsDialog-DNMTveXr.js"),__vite__mapDeps([20,1,2,7,13]),import.meta.url)),bt=O(function({model:e}){const t=I.getSession(e),[i,n]=C.useState(),[s,a]=C.useState(),[o,c]=C.useState(!1),[h,u]=C.useState(!1),[b,x]=C.useState(!1);function d(m,p){var r;const f=ke.readConfObject(m,"name"),g=(r=t.prepareToBreakConnection)===null||r===void 0?void 0:r.call(t,m);if(g){const[_,v]=g;Object.keys(v).length>0?n({connectionConf:m,safelyBreakConnection:_,dereferenceTypeCount:v,name:f}):_()}p&&a({name:f,connectionConf:m})}return l.jsxs(l.Fragment,{children:[l.jsx(B,{menuItems:[{label:"Open faceted track selector",onClick:()=>{x(!0)}},...I.isSessionWithAddTracks(t)?[{label:"Add track...",onClick:()=>{I.isSessionModelWithWidgets(t)&&t.showWidget(t.addWidget("AddTrackWidget","addTrackWidget",{view:e.view.id}))}}]:[],{label:"Connections...",subMenu:[...I.isSessionModelWithConnections(t)?[{label:"Turn on/off connections...",onClick:()=>{c(!0)}}]:[],...I.isSessionModelWithConnectionEditing(t)?[{label:"Add connection...",onClick:()=>{I.isSessionModelWithWidgets(t)&&t.showWidget(t.addWidget("AddConnectionWidget","addConnectionWidget"))}},{label:"Delete connections...",onClick:()=>{u(!0)}}]:[]]},{label:"Sort...",type:"subMenu",subMenu:[{label:"Sort tracks by name",type:"checkbox",checked:e.activeSortTrackNames,onClick:()=>{e.setSortTrackNames(!e.activeSortTrackNames)}},{label:"Sort categories by name",type:"checkbox",checked:e.activeSortCategories,onClick:()=>{e.setSortCategories(!e.activeSortCategories)}}]},{label:"Collapse...",type:"subMenu",subMenu:[...e.hasAnySubcategories?[{label:"Collapse subcategories",onClick:()=>{e.collapseSubCategories()}}]:[],{label:"Collapse top-level categories",onClick:()=>{e.collapseTopLevelCategories()}},{label:"Expand all categories",onClick:()=>{e.expandAllCategories()}}]}],children:l.jsx(Je,{})}),l.jsxs(C.Suspense,{fallback:null,children:[i?l.jsx(pt,{modalInfo:i,onClose:()=>{n(void 0)}}):null,s?l.jsx(mt,{handleClose:()=>{a(void 0)},deleteDialogDetails:s,session:t}):null,h?l.jsx(vt,{handleClose:()=>{u(!1)},breakConnection:d,session:t}):null,o?l.jsx(_t,{handleClose:()=>{c(!1)},session:t,breakConnection:d}):null,b?l.jsx(gt,{handleClose:()=>{x(!1)},model:e}):null]})]})}),St=L(l.jsx("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"})),yt=O(function({model:e}){const t=I.getSession(e),{selection:i}=e,{pluginManager:n}=I.getEnv(e),{adminMode:s,sessionTracks:a}=t,o=new Set(a==null?void 0:a.map(u=>u.trackId)),c=u=>s||o.has(u),h=n.evaluateExtensionPoint("TrackSelector-multiTrackMenuItems",[],{session:t});return i.length?l.jsx(B,{menuItems:[{label:"Clear selection",onClick:()=>{e.clearSelection()}},...i.every(u=>c(u.trackId))?[{label:"Delete tracks",onClick:()=>{var u;for(const b of i)(u=t.deleteTrackConf)===null||u===void 0||u.call(t,b)}}]:[],...h.map(u=>({...u,..."onClick"in u?{onClick:()=>{u.onClick(e)}}:{}}))],children:l.jsx(se,{badgeContent:i.length,color:"primary",children:l.jsx(St,{})})}):null}),xt=L(l.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),we=L(l.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Tt=L(l.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Ct=L(l.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),kt=R()({cascadingStyle:{padding:0}}),Me=function({id:e,trackId:t,stopPropagation:i,model:n,setOpen:s,conf:a}){var o,c;const{classes:h}=kt();return l.jsx(B,{className:h.cascadingStyle,stopPropagation:i,setOpen:s,"data-testid":`htsTrackEntryMenu-${e}`,menuItems:[...((c=(o=I.getSession(n)).getTrackActionMenuItems)===null||c===void 0?void 0:c.call(o,a))||[],n.isFavorite(t)?{label:"Remove from favorites",onClick:()=>{n.removeFromFavorites(t)},icon:Ct}:{label:"Add to favorites",onClick:()=>{n.addToFavorites(t)},icon:Tt},{label:"Add to selection",onClick:()=>{n.addToSelection([a])}},...n.isSelected(a)?[{label:"Remove from selection",onClick:()=>{n.removeFromSelection([a])}}]:[]],children:l.jsx(we,{})})},Oe=O(function({model:e,tracks:t,extraMenuItems:i,children:n,onClick:s}){const{view:a}=e,[o,c]=C.useState(!1),h=I.getSession(e);return a?l.jsx(B,{closeAfterItemClick:!1,onClick:s,menuItems:[...t.map(u=>({type:"checkbox",label:l.jsxs(l.Fragment,{children:[l.jsx(ze,{html:Xe.getTrackName(u,h)})," ",l.jsx(Me,{id:u.trackId,trackId:u.trackId,model:e,conf:u,setOpen:c,stopPropagation:!0})]}),checked:a.tracks.some(b=>b.configuration===u),onClick:()=>{o||e.view.toggleTrack(u.trackId)&&e.addToRecentlyUsed(u.trackId)}})),...i],children:n}):null}),It=R()({smallBadge:{height:14},margin:{marginRight:10}}),zt=O(function({model:e}){const{classes:t}=It(),{view:i,favoriteTracks:n}=e;return i?l.jsx(Oe,{onClick:()=>{e.setFavoritesCounter(0)},tracks:n,model:e,extraMenuItems:n.length?[{type:"divider"},{label:"Clear favorites",onClick:()=>{e.clearFavorites()}}]:[{label:"No favorite tracks yet",onClick:()=>{}}],children:l.jsx(ie,{title:"Favorite tracks",children:l.jsx(se,{classes:{badge:t.smallBadge},color:"secondary",anchorOrigin:{vertical:"bottom",horizontal:"right"},className:t.margin,badgeContent:e.favoritesCounter,children:l.jsx(xt,{})})})}):null}),wt=L(l.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),Mt=R()({smallBadge:{height:14}}),Ot=O(function({model:e}){const{classes:t}=Mt(),{view:i,recentlyUsedCounter:n,recentlyUsedTracks:s}=e;return i?l.jsx(Oe,{onClick:()=>{e.setRecentlyUsedCounter(0)},model:e,tracks:s,extraMenuItems:s.length?[{type:"divider"},{label:"Clear recently used",onClick:()=>{e.clearRecentlyUsed()}}]:[{label:"No recently used",onClick:()=>{}}],children:l.jsx(ie,{title:"Recently used tracks",children:l.jsx(se,{classes:{badge:t.smallBadge},anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"secondary",badgeContent:n,children:l.jsx(wt,{})})})}):null}),jt=R()(e=>({searchBox:{margin:e.spacing(2)}})),Et=O(function({model:e}){const{filterText:t}=e,{classes:i}=jt();return l.jsx(Ze,{className:i.searchBox,label:"Filter tracks",value:t,onChange:n=>{e.setFilterText(n.target.value)},fullWidth:!0,slotProps:{input:{endAdornment:l.jsx(Qe,{position:"end",children:l.jsx(Ye,{onClick:()=>{e.clearFilterText()},children:l.jsx(rt,{})})})}}})}),Rt=O(function({model:e,setHeaderHeight:t}){return l.jsx("div",{ref:i=>{t((i==null?void 0:i.getBoundingClientRect().height)||0)},"data-testid":"hierarchical_track_selector",children:l.jsxs("div",{style:{display:"flex"},children:[l.jsx(bt,{model:e}),l.jsx(yt,{model:e}),l.jsx(Et,{model:e}),l.jsx(Ot,{model:e}),l.jsx(zt,{model:e})]})})});var me=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Lt(e,t){return!!(e===t||me(e)&&me(t))}function Wt(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!Lt(e[i],t[i]))return!1;return!0}function J(e,t){t===void 0&&(t=Wt);var i,n=[],s,a=!1;function o(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return a&&i===this&&t(c,n)||(s=e.apply(this,c),a=!0,i=this,n=c),s}return o}var Dt=typeof performance=="object"&&typeof performance.now=="function",ve=Dt?function(){return performance.now()}:function(){return Date.now()};function _e(e){cancelAnimationFrame(e.id)}function Ft(e,t){var i=ve();function n(){ve()-i>=t?e.call(null):s.id=requestAnimationFrame(n)}var s={id:requestAnimationFrame(n)};return s}var X=-1;function be(e){if(e===void 0&&(e=!1),X===-1||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(t),X=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return X}var A=null;function Se(e){if(e===void 0&&(e=!1),A===null||e){var t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var n=document.createElement("div"),s=n.style;return s.width="100px",s.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?A="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?A="negative":A="positive-ascending"),document.body.removeChild(t),A}return A}var At=150,Nt=function(t,i){return t};function Ht(e){var t,i=e.getItemOffset,n=e.getEstimatedTotalSize,s=e.getItemSize,a=e.getOffsetForIndexAndAlignment,o=e.getStartIndexForOffset,c=e.getStopIndexForStartIndex,h=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,b=e.validateProps;return t=(function(x){re(d,x);function d(p){var r;return r=x.call(this,p)||this,r._instanceProps=h(r.props,W(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:W(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof r.props.initialScrollOffset=="number"?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=J(function(f,g,_,v){return r.props.onItemsRendered({overscanStartIndex:f,overscanStopIndex:g,visibleStartIndex:_,visibleStopIndex:v})}),r._callOnScroll=void 0,r._callOnScroll=J(function(f,g,_){return r.props.onScroll({scrollDirection:f,scrollOffset:g,scrollUpdateWasRequested:_})}),r._getItemStyle=void 0,r._getItemStyle=function(f){var g=r.props,_=g.direction,v=g.itemSize,y=g.layout,S=r._getItemStyleCache(u&&v,u&&y,u&&_),T;if(S.hasOwnProperty(f))T=S[f];else{var k=i(r.props,f,r._instanceProps),M=s(r.props,f,r._instanceProps),z=_==="horizontal"||y==="horizontal",j=_==="rtl",D=z?k:0;S[f]=T={position:"absolute",left:j?void 0:D,right:j?D:void 0,top:z?0:k,height:z?"100%":M,width:z?M:"100%"}}return T},r._getItemStyleCache=void 0,r._getItemStyleCache=J(function(f,g,_){return{}}),r._onScrollHorizontal=function(f){var g=f.currentTarget,_=g.clientWidth,v=g.scrollLeft,y=g.scrollWidth;r.setState(function(S){if(S.scrollOffset===v)return null;var T=r.props.direction,k=v;if(T==="rtl")switch(Se()){case"negative":k=-v;break;case"positive-descending":k=y-_-v;break}return k=Math.max(0,Math.min(k,y-_)),{isScrolling:!0,scrollDirection:S.scrollOffset<k?"forward":"backward",scrollOffset:k,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._onScrollVertical=function(f){var g=f.currentTarget,_=g.clientHeight,v=g.scrollHeight,y=g.scrollTop;r.setState(function(S){if(S.scrollOffset===y)return null;var T=Math.max(0,Math.min(y,v-_));return{isScrolling:!0,scrollDirection:S.scrollOffset<T?"forward":"backward",scrollOffset:T,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(f){var g=r.props.outerRef;r._outerRef=f,typeof g=="function"?g(f):g!=null&&typeof g=="object"&&g.hasOwnProperty("current")&&(g.current=f)},r._resetIsScrollingDebounced=function(){r._resetIsScrollingTimeoutId!==null&&_e(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Ft(r._resetIsScrolling,At)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1,null)})},r}d.getDerivedStateFromProps=function(r,f){return $t(r,f),b(r),null};var m=d.prototype;return m.scrollTo=function(r){r=Math.max(0,r),this.setState(function(f){return f.scrollOffset===r?null:{scrollDirection:f.scrollOffset<r?"forward":"backward",scrollOffset:r,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},m.scrollToItem=function(r,f){f===void 0&&(f="auto");var g=this.props,_=g.itemCount,v=g.layout,y=this.state.scrollOffset;r=Math.max(0,Math.min(r,_-1));var S=0;if(this._outerRef){var T=this._outerRef;v==="vertical"?S=T.scrollWidth>T.clientWidth?be():0:S=T.scrollHeight>T.clientHeight?be():0}this.scrollTo(a(this.props,r,f,y,this._instanceProps,S))},m.componentDidMount=function(){var r=this.props,f=r.direction,g=r.initialScrollOffset,_=r.layout;if(typeof g=="number"&&this._outerRef!=null){var v=this._outerRef;f==="horizontal"||_==="horizontal"?v.scrollLeft=g:v.scrollTop=g}this._callPropsCallbacks()},m.componentDidUpdate=function(){var r=this.props,f=r.direction,g=r.layout,_=this.state,v=_.scrollOffset,y=_.scrollUpdateWasRequested;if(y&&this._outerRef!=null){var S=this._outerRef;if(f==="horizontal"||g==="horizontal")if(f==="rtl")switch(Se()){case"negative":S.scrollLeft=-v;break;case"positive-ascending":S.scrollLeft=v;break;default:var T=S.clientWidth,k=S.scrollWidth;S.scrollLeft=k-T-v;break}else S.scrollLeft=v;else S.scrollTop=v}this._callPropsCallbacks()},m.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&_e(this._resetIsScrollingTimeoutId)},m.render=function(){var r=this.props,f=r.children,g=r.className,_=r.direction,v=r.height,y=r.innerRef,S=r.innerElementType,T=r.innerTagName,k=r.itemCount,M=r.itemData,z=r.itemKey,j=z===void 0?Nt:z,D=r.layout,U=r.outerElementType,F=r.outerTagName,E=r.style,Le=r.useIsScrolling,We=r.width,ae=this.state.isScrolling,q=_==="horizontal"||D==="horizontal",De=q?this._onScrollHorizontal:this._onScrollVertical,oe=this._getRangeToRender(),Fe=oe[0],Ae=oe[1],le=[];if(k>0)for(var $=Fe;$<=Ae;$++)le.push(C.createElement(f,{data:M,key:j($,M),index:$,isScrolling:Le?ae:void 0,style:this._getItemStyle($)}));var ce=n(this.props,this._instanceProps);return C.createElement(U||F||"div",{className:g,onScroll:De,ref:this._outerRefSetter,style:ne({position:"relative",height:v,width:We,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:_},E)},C.createElement(S||T||"div",{children:le,ref:y,style:{height:q?"100%":ce,pointerEvents:ae?"none":void 0,width:q?ce:"100%"}}))},m._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var r=this.props.itemCount;if(r>0){var f=this._getRangeToRender(),g=f[0],_=f[1],v=f[2],y=f[3];this._callOnItemsRendered(g,_,v,y)}}if(typeof this.props.onScroll=="function"){var S=this.state,T=S.scrollDirection,k=S.scrollOffset,M=S.scrollUpdateWasRequested;this._callOnScroll(T,k,M)}},m._getRangeToRender=function(){var r=this.props,f=r.itemCount,g=r.overscanCount,_=this.state,v=_.isScrolling,y=_.scrollDirection,S=_.scrollOffset;if(f===0)return[0,0,0,0];var T=o(this.props,S,this._instanceProps),k=c(this.props,T,S,this._instanceProps),M=!v||y==="backward"?Math.max(1,g):1,z=!v||y==="forward"?Math.max(1,g):1;return[Math.max(0,T-M),Math.max(0,Math.min(f-1,k+z)),T,k]},d})(C.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var $t=function(t,i){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,i.instance},Pt=50,H=function(t,i,n){var s=t,a=s.itemSize,o=n.itemMetadataMap,c=n.lastMeasuredIndex;if(i>c){var h=0;if(c>=0){var u=o[c];h=u.offset+u.size}for(var b=c+1;b<=i;b++){var x=a(b);o[b]={offset:h,size:x},h+=x}n.lastMeasuredIndex=i}return o[i]},Bt=function(t,i,n){var s=i.itemMetadataMap,a=i.lastMeasuredIndex,o=a>0?s[a].offset:0;return o>=n?je(t,i,a,0,n):Ut(t,i,Math.max(0,a),n)},je=function(t,i,n,s,a){for(;s<=n;){var o=s+Math.floor((n-s)/2),c=H(t,o,i).offset;if(c===a)return o;c<a?s=o+1:c>a&&(n=o-1)}return s>0?s-1:0},Ut=function(t,i,n,s){for(var a=t.itemCount,o=1;n<a&&H(t,n,i).offset<s;)n+=o,o*=2;return je(t,i,Math.min(n,a-1),Math.floor(n/2),s)},ye=function(t,i){var n=t.itemCount,s=i.itemMetadataMap,a=i.estimatedItemSize,o=i.lastMeasuredIndex,c=0;if(o>=n&&(o=n-1),o>=0){var h=s[o];c=h.offset+h.size}var u=n-o-1,b=u*a;return c+b},qt=Ht({getItemOffset:function(t,i,n){return H(t,i,n).offset},getItemSize:function(t,i,n){return n.itemMetadataMap[i].size},getEstimatedTotalSize:ye,getOffsetForIndexAndAlignment:function(t,i,n,s,a,o){var c=t.direction,h=t.height,u=t.layout,b=t.width,x=c==="horizontal"||u==="horizontal",d=x?b:h,m=H(t,i,a),p=ye(t,a),r=Math.max(0,Math.min(p-d,m.offset)),f=Math.max(0,m.offset-d+m.size+o);switch(n==="smart"&&(s>=f-d&&s<=r+d?n="auto":n="center"),n){case"start":return r;case"end":return f;case"center":return Math.round(f+(r-f)/2);case"auto":default:return s>=f&&s<=r?s:s<f?f:r}},getStartIndexForOffset:function(t,i,n){return Bt(t,n,i)},getStopIndexForStartIndex:function(t,i,n,s){for(var a=t.direction,o=t.height,c=t.itemCount,h=t.layout,u=t.width,b=a==="horizontal"||h==="horizontal",x=b?u:o,d=H(t,i,s),m=n+x,p=d.offset+d.size,r=i;r<c-1&&p<m;)r++,p+=H(t,r,s).size;return r},initInstanceProps:function(t,i){var n=t,s=n.estimatedItemSize,a={itemMetadataMap:{},estimatedItemSize:s||Pt,lastMeasuredIndex:-1};return i.resetAfterIndex=function(o,c){c===void 0&&(c=!0),a.lastMeasuredIndex=Math.min(a.lastMeasuredIndex,o-1),i._getItemStyleCache(-1),c&&i.forceUpdate()},a},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});function Vt(e){return function(t){e.forEach(function(i){typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Z=function(){},Kt=function(t,i){return i===void 0&&(i=null),{child:null,isShown:i?i.public.isOpen&&i.isShown:!0,parent:i,public:t,sibling:null,visited:!1}},Gt=function(t,i){var n=i.getRecordData,s=n(t),a=s.data.id;return a},Jt=function(t){var i=t.index,n=t.data,s=n.component,a=n.getRecordData,o=n.treeData,c=t.style,h=t.isScrolling,u=a(i);return Ie.createElement(s,Object.assign({isScrolling:h,style:c,treeData:o},u))},Xt=function(t,i,n){var s=t.createRecord,a=i.buildingTaskTimeout,o=i.placeholder,c=i.async,h=c===void 0?!1:c,u=i.treeWalker,b=h&&n.records!==void 0,x=n.records,d=[],m=new Map,p=a?{timeout:a}:void 0,r=new WeakMap,f=u(),g=f.next(),_=g.value,v=s(_.data,n,void 0,b?x.get(_.data.id):void 0);m.set(v.public.data.id,v),r.set(v,_);var y=v,S=!0,T=v,k=o!==void 0&&!(o===null&&!n.order),M=k?function(j){return j.timeRemaining()>0}:function(){return!0},z=function j(D){for(;y!==null;){if(!M(D)){requestIdleCallback(j,p);return}if(y.visited)y.visited=!1,y=y.sibling!==null?y.sibling:y.parent,T=y;else{var U=f.next(r.get(y)),F=U.value;if(F===void 0){S?S=!1:(y.isShown&&d.push(y.public.data.id),y.visited=y.child!==null,y=y.child!==null?y.child:y.sibling!==null?y.sibling:y.parent),T=y;continue}var E=s(F.data,n,S?void 0:y,b?x.get(F.data.id):void 0);m.set(E.public.data.id,E),r.set(E,F),!S&&T===y?T.child=E:T.sibling=E,T=E}}k&&n.setState({order:d,records:m,updateRequest:{}})};return k?requestIdleCallback(z,p):z(),o!==void 0&&h&&n.order?n:{order:d,records:m}},xe=32768,Zt=2,Qt=function(t,i){var n=t.order,s=t.records,a=i.opennessState;if(typeof a!="object")return null;for(var o in a)if(s.has(o)){var c=a[o],h=s.get(o),u=typeof c=="boolean"?{open:c}:c,b=u.open,x=u.subtreeCallback,d=x===void 0?Z:x,m=Z,p=Z;h.isShown&&(b?(function(){for(var f=n.indexOf(o),g=h;g!==null;){if(g.sibling!==null){g=g.sibling;break}g=g.parent}var _=g===null?n.length-1-f:n.indexOf(g.public.data.id)-1-f,v=[[f+1,_]];m=function(S){if(S.isShown=S.parent?S.parent.public.isOpen&&S.parent.isShown:!0,S.isShown){var T=v[v.length-1];T.push(S.public.data.id),T.length===xe+Zt&&v.push([f+1+xe*v.length,0])}},p=function(){for(var S=0;S<v.length;S++){var T;(T=n).splice.apply(T,v[S])}}})():h.public.isOpen&&(function(){var f=n.indexOf(o),g=0;m=function(v){v.isShown&&(g+=1),v.isShown=v.parent?v.parent.public.isOpen&&v.parent.isShown:!0},p=function(){n.splice(f+1,g)}})());for(var r=h;r!==null;)r.visited?(r.visited=!1,r=r===h?null:r.sibling!==null?r.sibling:r.parent):(r.public.isOpen=r===h?b:r.public.isOpen,d(r.public,h.public),r!==h&&m(r),r.visited=r.child!==null,r=r.child!==null?r.child:r===h?null:r.sibling!==null?r.sibling:r.parent);p()}return{order:n,records:s,updateRequest:{}}},Yt=function(t){return function(i,n,s){return s.refresh?Xt(t,i,n):Qt(n,s)}},Ee=(function(e){re(t,e),t.getDerivedStateFromProps=function(s,a){var o=s.listRef,c=o===void 0?null:o,h=s.treeWalker,u=a.computeTree,b=a.list,x=a.order,d=a.treeWalker;return ne({attachRefs:Vt([b,c])},h!==d||!x?u(s,a,{refresh:!0}):null,{treeWalker:h})};function t(n,s){var a;return a=e.call(this,n,s)||this,a.getRecordData=a.getRecordData.bind(W(a)),a.state={list:C.createRef(),recomputeTree:a.recomputeTree.bind(W(a)),setState:a.setState.bind(W(a))},a}var i=t.prototype;return i.getItemData=function(){var s=this.props,a=s.children,o=s.itemData;return{component:a,getRecordData:this.getRecordData,treeData:o}},i.getRecordData=function(s){var a=this.state,o=a.order,c=a.records;return c.get(o[s]).public},i.recomputeTree=function(s){var a=this;return new Promise(function(o){a.setState(function(c){return c.computeTree(a.props,c,{opennessState:s})},o)})},i.scrollTo=function(s){var a;(a=this.state.list.current)==null||a.scrollTo(s)},i.scrollToItem=function(s,a){var o;(o=this.state.list.current)==null||o.scrollToItem(this.state.order.indexOf(s),a)},t})(C.PureComponent);Ee.defaultProps={rowComponent:Jt};var ei=Yt({createRecord:function(t,i,n,s){var a=i.recomputeTree,o=i.resetAfterId,c=Kt({data:t,height:s?s.public.height:t.defaultHeight,isOpen:s?s.public.isOpen:t.isOpenByDefault,resize:function(u,b){c.public.height=u,o(c.public.data.id,b)},setOpen:function(u){var b;return a((b={},b[t.id]=u,b))}},n);return c}}),ti=(function(e){re(t,e);function t(n,s){var a;return a=e.call(this,n,s)||this,a.getItemSize=a.getItemSize.bind(W(a)),a.state=ne({},a.state,{computeTree:ei,resetAfterId:a.resetAfterId.bind(W(a))}),a}var i=t.prototype;return i.resetAfterId=function(s,a){var o;a===void 0&&(a=!1);var c=this.state,h=c.list,u=c.order;(o=h.current)==null||o.resetAfterIndex(u.indexOf(s),a)},i.recomputeTree=function(s){var a=this;return e.prototype.recomputeTree.call(this,s).then(function(){var o;(o=a.state.list.current)==null||o.resetAfterIndex(0,!0)})},i.render=function(){var s=this.props;s.children;var a=s.placeholder,o=s.itemSize,c=s.rowComponent;s.treeWalker;var h=et(s,["children","placeholder","itemSize","rowComponent","treeWalker"]),u=this.state,b=u.attachRefs,x=u.order;return a&&x.length===0?a:Ie.createElement(qt,Object.assign({},h,{itemCount:x.length,itemData:this.getItemData(),itemKey:Gt,itemSize:o??this.getItemSize,ref:b}),c)},i.getItemSize=function(s){return this.getRecordData(s).height},t})(Ee);const ii=L(l.jsx("path",{d:"m7 10 5 5 5-5z"})),ri=L(l.jsx("path",{d:"m10 17 5-5-5-5z"}));function te(e){return(e==null?void 0:e.type)==="category"?e.children.flatMap(t=>t.type==="category"?te(t):t.conf):[]}function N(e,t=new Map){e.id&&e.children.length&&t.set(e.id,e);for(const i of e.children)N(i,t);return t}function ni(e=""){return e.endsWith("(Unsupported)")||e.endsWith("(Unknown)")}function Re(e){const t=[];if(e.type==="category")for(const i of e.children)i.type==="category"&&t.push(i.id,...Re(i));return t}const si=R()(e=>({contrastColor:{color:e.palette.tertiary.contrastText},accordionText:{margin:"auto 0",width:"100%"}}));function ai({isOpen:e,setOpen:t,data:i}){const{classes:n}=si(),[s,a]=C.useState(!1),{menuItems:o=[],name:c,model:h,id:u,tree:b}=i,x=N(b).get(u),d=x?Re(x):[],m=d.length>0;return l.jsx("div",{className:n.accordionText,onClick:()=>{s||(i.toggleCollapse(u),t(!e))},children:l.jsxs(tt,{"data-testid":`htsCategory-${c}`,children:[e?l.jsx(ii,{}):l.jsx(ri,{}),c,l.jsx(it.CascadingMenuButton,{menuItems:[{label:"Add to selection",onClick:()=>{const p=N(b).get(u);h.addToSelection(te(p))},helpText:"Add all tracks in this category to the current selection. This allows you to perform bulk operations on multiple tracks at once, such as configuring settings or exporting track configurations."},{label:"Remove from selection",onClick:()=>{const p=N(b).get(u);h.removeFromSelection(te(p))},helpText:"Remove all tracks in this category from the current selection. Use this to deselect tracks that were previously added to your selection."},{label:"Show all",onClick:()=>{var p;for(const r of((p=N(b).get(u))===null||p===void 0?void 0:p.children)||[])r.type==="track"&&h.view.showTrack(r.trackId)},helpText:"Display all tracks in this category on the current view. This is useful when you want to visualize multiple related tracks simultaneously to compare their data."},{label:"Hide all",onClick:()=>{var p;for(const r of((p=N(b).get(u))===null||p===void 0?void 0:p.children)||[])r.type==="track"&&h.view.hideTrack(r.trackId)},helpText:"Hide all tracks in this category from the current view. This helps declutter your view by removing tracks you are not currently analyzing."},...m?[{label:"Collapse all subcategories",onClick:()=>{for(const p of d)h.collapsed.get(p)||h.toggleCategory(p)},helpText:"Collapse all nested subcategories within this category. This provides a cleaner, more compact view of the track hierarchy by hiding the detailed contents of subcategories."},{label:"Expand all subcategories",onClick:()=>{for(const p of d)h.collapsed.get(p)&&h.toggleCategory(p)},helpText:"Expand all nested subcategories within this category. This reveals all tracks and subcategories at once, making it easier to browse and select tracks from the entire hierarchy."}]:[],...o],className:n.contrastColor,stopPropagation:!0,setOpen:a,children:l.jsx(we,{})})]})})}const oi=R()(e=>({compactCheckbox:{padding:0},checkboxLabel:{marginRight:0,"&:hover":{backgroundColor:e.palette.action.selected}},selected:{background:"#cccc"}}));function li({data:e}){const{classes:t}=oi(),{checked:i,conf:n,model:s,drawerPosition:a,id:o,trackId:c,name:h,selected:u,onChange:b}=e,x=ke.readConfObject(n,"description");return l.jsxs(l.Fragment,{children:[l.jsx(ie,{title:x+(u?" (in selection)":""),placement:a==="left"?"right":"left",children:l.jsx(nt,{className:t.checkboxLabel,onClick:d=>{(d.ctrlKey||d.metaKey)&&(u?s.removeFromSelection([n]):s.addToSelection([n]),d.preventDefault())},control:l.jsx(st,{className:t.compactCheckbox,checked:i,onChange:()=>{b(c)},disabled:ni(h),slotProps:{input:{"data-testid":`htsTrackEntry-${o}`}}}),label:l.jsx("div",{"data-testid":`htsTrackLabel-${o}`,className:u?t.selected:void 0,children:l.jsx(ze,{html:h})})})}),l.jsx(Me,{model:s,trackId:c,id:o,conf:n})]})}const ci=R()(e=>({accordionBase:{display:"flex"},accordionCard:{padding:3,cursor:"pointer",display:"flex"},nestingLevelMarker:{position:"absolute",borderLeft:"1.5px solid #555"},accordionColor:{background:e.palette.tertiary.main,color:e.palette.tertiary.contrastText,width:"100%",display:"flex",paddingLeft:5}}));function di({data:e,isOpen:t,style:i,setOpen:n}){const{isLeaf:s,nestingLevel:a}=e,{classes:o}=ci(),c=10,h=a*c+(s?c:0);return l.jsxs("div",{style:i,className:s?void 0:o.accordionBase,children:[new Array(a).fill(0).map((u,b)=>l.jsx("div",{style:{left:b*c+4,height:i==null?void 0:i.height},className:o.nestingLevelMarker},`mark-${b}`)),l.jsx("div",{className:s?void 0:o.accordionCard,style:{marginLeft:h,whiteSpace:"nowrap",width:"100%"},children:l.jsx("div",{className:s?void 0:o.accordionColor,children:s?l.jsx(li,{data:e}):l.jsx(ai,{isOpen:t,data:e,setOpen:n})})})]})}function Te(e,t,i,n){const s=e.type==="track",a=s?n[e.trackId]:!1;return{data:{defaultHeight:s?22:40,isLeaf:s,isOpenByDefault:!0,nestingLevel:t,selected:a,...e,...i},nestingLevel:t,node:e}}const Ce=O(function({height:t,tree:i,model:n}){const{filterText:s,selection:a,view:o}=n,c=C.useRef(null),h=I.getSession(n),{drawerPosition:u}=h,b=C.useMemo(()=>Object.fromEntries(a.map(m=>[m.trackId,m])),[a]),x=C.useMemo(()=>({onChange:m=>{o.toggleTrack(m)&&n.addToRecentlyUsed(m)},toggleCollapse:m=>{n.toggleCategory(m)},tree:i,model:n,drawerPosition:u}),[o,n,u,i]),d=C.useCallback(function*(){for(const p of i.children)yield Te(p,0,x,b);for(;;){const p=yield;for(const r of p.node.children)yield Te(r,p.nestingLevel+1,x,b)}},[i,x,b]);return C.useEffect(()=>{c.current.recomputeTree({refreshNodes:!0,useDefaultHeight:!0})},[i,s]),l.jsx(l.Fragment,{children:l.jsx(ti,{ref:c,treeWalker:d,height:t,children:di})})}),ui=({tree:e,model:t,offset:i})=>typeof jest>"u"?l.jsx(ut,{disableWidth:!0,children:n=>l.jsx(Ce,{height:(n.height||i)-i,model:t,tree:e})}):l.jsx(Ce,{height:9e3,model:t,tree:e}),hi=({overrideDimensions:e,children:t})=>e?l.jsx("div",{style:{...e},children:t}):t,fi=O(function({model:e,toolbarHeight:t,overrideDimensions:i}){return l.jsxs(hi,{overrideDimensions:i,children:[l.jsx(gi,{model:e,toolbarHeight:t}),l.jsx(ft,{model:e})]})}),gi=O(function({model:e,toolbarHeight:t=0}){const[i,n]=C.useState(0);return l.jsxs(l.Fragment,{children:[l.jsx(Rt,{model:e,setHeaderHeight:n}),l.jsx(ui,{tree:e.hierarchy,model:e,offset:t+i})]})}),xi=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"}));export{xi as H,yt as S,Me as T};
//# sourceMappingURL=HierarchicalTrackSelector-DI4oEPbG.js.map
